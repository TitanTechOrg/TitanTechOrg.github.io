import{r,t as P,j as $,R as U,V as k,$ as N}from"./index-DHy5VeOG.js";import{u as _}from"./chunk-6LIX6LVT-CcQgyswi.js";var le=(...t)=>{let e=" ";for(const a of t)if(typeof a=="string"&&a.length>0){e=a;break}return e};function q(t){const e=r.useRef(null);return r.useMemo(()=>({get current(){return e.current},set current(a){e.current=a,typeof t=="function"?t(a):t&&(t.current=a)}}),[t])}var z=P({base:"flex flex-col gap-2 items-start"}),re=t=>$.jsx("svg",{"aria-hidden":"true",focusable:"false",height:"1em",role:"presentation",viewBox:"0 0 24 24",width:"1em",...t,children:$.jsx("path",{d:"M12 2a10 10 0 1010 10A10.016 10.016 0 0012 2zm3.36 12.3a.754.754 0 010 1.06.748.748 0 01-1.06 0l-2.3-2.3-2.3 2.3a.748.748 0 01-1.06 0 .754.754 0 010-1.06l2.3-2.3-2.3-2.3A.75.75 0 019.7 8.64l2.3 2.3 2.3-2.3a.75.75 0 011.06 1.06l-2.3 2.3z",fill:"currentColor"})});const w={badInput:!1,customError:!1,patternMismatch:!1,rangeOverflow:!1,rangeUnderflow:!1,stepMismatch:!1,tooLong:!1,tooShort:!1,typeMismatch:!1,valueMissing:!1,valid:!0},D={...w,customError:!0,valid:!1},m={isInvalid:!1,validationDetails:w,validationErrors:[]},Q=r.createContext({}),C="__formValidationState"+Date.now();function ne(t){if(t[C]){let{realtimeValidation:e,displayValidation:a,updateValidation:i,resetValidation:o,commitValidation:l}=t[C];return{realtimeValidation:e,displayValidation:a,updateValidation:i,resetValidation:o,commitValidation:l}}return K(t)}function K(t){let{isInvalid:e,validationState:a,name:i,value:o,builtinValidation:l,validate:c,validationBehavior:u="aria"}=t;a&&(e||(e=a==="invalid"));let n=e!==void 0?{isInvalid:e,validationErrors:[],validationDetails:D}:null,s=r.useMemo(()=>{if(!c||o==null)return null;let d=Y(c,o);return L(d)},[c,o]);l!=null&&l.validationDetails.valid&&(l=void 0);let v=r.useContext(Q),f=r.useMemo(()=>i?Array.isArray(i)?i.flatMap(d=>M(v[d])):M(v[i]):[],[v,i]),[F,O]=r.useState(v),[I,y]=r.useState(!1);v!==F&&(O(v),y(!1));let V=r.useMemo(()=>L(I?[]:f),[I,f]),S=r.useRef(m),[E,x]=r.useState(m),b=r.useRef(m),B=()=>{if(!T)return;h(!1);let d=s||l||S.current;p(d,b.current)||(b.current=d,x(d))},[T,h]=r.useState(!1);return r.useEffect(B),{realtimeValidation:n||V||s||l||m,displayValidation:u==="native"?n||V||E:n||V||s||l||E,updateValidation(d){u==="aria"&&!p(E,d)?x(d):S.current=d},resetValidation(){let d=m;p(d,b.current)||(b.current=d,x(d)),u==="native"&&h(!1),y(!0)},commitValidation(){u==="native"&&h(!0),y(!0)}}}function M(t){return t?Array.isArray(t)?t:[t]:[]}function Y(t,e){if(typeof t=="function"){let a=t(e);if(a&&typeof a!="boolean")return M(a)}return[]}function L(t){return t.length?{isInvalid:!0,validationErrors:t,validationDetails:D}:null}function p(t,e){return t===e?!0:!!t&&!!e&&t.isInvalid===e.isInvalid&&t.validationErrors.length===e.validationErrors.length&&t.validationErrors.every((a,i)=>a===e.validationErrors[i])&&Object.entries(t.validationDetails).every(([a,i])=>e.validationDetails[a]===i)}const R=typeof document<"u"?U.useLayoutEffect:()=>{};function g(t){const e=r.useRef(null);return R(()=>{e.current=t},[t]),r.useCallback((...a)=>{const i=e.current;return i==null?void 0:i(...a)},[])}function oe(t,e,a){let{validationBehavior:i,focus:o}=t;R(()=>{if(i==="native"&&(a!=null&&a.current)&&!a.current.disabled){let n=e.realtimeValidation.isInvalid?e.realtimeValidation.validationErrors.join(" ")||"Invalid value.":"";a.current.setCustomValidity(n),a.current.hasAttribute("title")||(a.current.title=""),e.realtimeValidation.isInvalid||e.updateValidation(H(a.current))}});let l=g(()=>{e.resetValidation()}),c=g(n=>{var s;e.displayValidation.isInvalid||e.commitValidation();let v=a==null||(s=a.current)===null||s===void 0?void 0:s.form;if(!n.defaultPrevented&&a&&v&&J(v)===a.current){var f;o?o():(f=a.current)===null||f===void 0||f.focus(),k("keyboard")}n.preventDefault()}),u=g(()=>{e.commitValidation()});r.useEffect(()=>{let n=a==null?void 0:a.current;if(!n)return;let s=n.form;return n.addEventListener("invalid",c),n.addEventListener("change",u),s==null||s.addEventListener("reset",l),()=>{n.removeEventListener("invalid",c),n.removeEventListener("change",u),s==null||s.removeEventListener("reset",l)}},[a,c,u,l,i])}function G(t){let e=t.validity;return{badInput:e.badInput,customError:e.customError,patternMismatch:e.patternMismatch,rangeOverflow:e.rangeOverflow,rangeUnderflow:e.rangeUnderflow,stepMismatch:e.stepMismatch,tooLong:e.tooLong,tooShort:e.tooShort,typeMismatch:e.typeMismatch,valueMissing:e.valueMissing,valid:e.valid}}function H(t){return{isInvalid:!t.validity.valid,validationDetails:G(t),validationErrors:t.validationMessage?[t.validationMessage]:[]}}function J(t){for(let e=0;e<t.elements.length;e++){let a=t.elements[e];if(!a.validity.valid)return a}return null}var A=Symbol("default");function W(t,e){let a=r.useContext(t);if(e===null)return null;if(a&&typeof a=="object"&&"slots"in a&&a.slots){let i=new Intl.ListFormat().format(Object.keys(a.slots).map(l=>`"${l}"`));if(!e&&!a.slots[A])throw new Error(`A slot prop is required. Valid slot names are ${i}.`);let o=e||A;if(!a.slots[o])throw new Error(`Invalid slot "${e}". Valid slot names are ${i}.`);return a.slots[o]}return a}function X(t,e,a){let i=W(a,t.slot)||{},{ref:o,...l}=i,c=q(r.useMemo(()=>_(e,o),[e,o])),u=N(l,t);return"style"in l&&l.style&&"style"in t&&t.style&&(typeof l.style=="function"||typeof t.style=="function"?u.style=n=>{let s=typeof l.style=="function"?l.style(n):l.style,v={...n.defaultStyle,...s},f=typeof t.style=="function"?t.style({...n,defaultStyle:v}):t.style;return{...v,...f}}:u.style={...l.style,...t.style}),[u,c]}const Z=r.createContext({});var j=r.createContext(null);r.forwardRef(function(e,a){[e,a]=X(e,a,j);let{validationErrors:i,validationBehavior:o="native",children:l,className:c,...u}=e;const n=r.useMemo(()=>z({className:c}),[c]);return $.jsx("form",{noValidate:o!=="native",...u,ref:a,className:n,children:$.jsx(j.Provider,{value:{...e,validationBehavior:o},children:$.jsx(Z.Provider,{value:i??{},children:l})})})});export{ne as $,re as C,j as F,oe as a,C as b,m as c,le as s,W as u};
