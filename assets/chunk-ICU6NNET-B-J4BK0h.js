import{t as T,j as $,r as o,am as U,G as x,U as k,aI as N,g as _}from"./index-CENqs8IR.js";var q=T({base:"flex flex-col gap-2 items-start"}),te=e=>$.jsx("svg",{"aria-hidden":"true",focusable:"false",height:"1em",role:"presentation",viewBox:"0 0 24 24",width:"1em",...e,children:$.jsx("path",{d:"M12 2a10 10 0 1010 10A10.016 10.016 0 0012 2zm3.36 12.3a.754.754 0 010 1.06.748.748 0 01-1.06 0l-2.3-2.3-2.3 2.3a.748.748 0 01-1.06 0 .754.754 0 010-1.06l2.3-2.3-2.3-2.3A.75.75 0 019.7 8.64l2.3 2.3 2.3-2.3a.75.75 0 011.06 1.06l-2.3 2.3z",fill:"currentColor"})});const A={badInput:!1,customError:!1,patternMismatch:!1,rangeOverflow:!1,rangeUnderflow:!1,stepMismatch:!1,tooLong:!1,tooShort:!1,typeMismatch:!1,valueMissing:!1,valid:!0},D={...A,customError:!0,valid:!1},y={isInvalid:!1,validationDetails:A,validationErrors:[]},F=o.createContext({}),C="__formValidationState"+Date.now();function ae(e){if(e[C]){let{realtimeValidation:t,displayValidation:a,updateValidation:r,resetValidation:n,commitValidation:i}=e[C];return{realtimeValidation:t,displayValidation:a,updateValidation:r,resetValidation:n,commitValidation:i}}return z(e)}function z(e){let{isInvalid:t,validationState:a,name:r,value:n,builtinValidation:i,validate:d,validationBehavior:c="aria"}=e;a&&(t||(t=a==="invalid"));let v=t!==void 0?{isInvalid:t,validationErrors:[],validationDetails:D}:null,s=o.useMemo(()=>{if(!d||n==null)return null;let u=Q(d,n);return R(u)},[d,n]);i?.validationDetails.valid&&(i=void 0);let l=o.useContext(F),f=o.useMemo(()=>r?Array.isArray(r)?r.flatMap(u=>M(l[u])):M(l[r]):[],[l,r]),[m,O]=o.useState(l),[S,V]=o.useState(!1);l!==m&&(O(l),V(!1));let E=o.useMemo(()=>R(S?[]:f),[S,f]),w=o.useRef(y),[g,h]=o.useState(y),b=o.useRef(y),P=()=>{if(!B)return;p(!1);let u=s||i||w.current;I(u,b.current)||(b.current=u,h(u))},[B,p]=o.useState(!1);return o.useEffect(P),{realtimeValidation:v||E||s||i||y,displayValidation:c==="native"?v||E||g:v||E||s||i||g,updateValidation(u){c==="aria"&&!I(g,u)?h(u):w.current=u},resetValidation(){let u=y;I(u,b.current)||(b.current=u,h(u)),c==="native"&&p(!1),V(!0)},commitValidation(){c==="native"&&p(!0),V(!0)}}}function M(e){return e?Array.isArray(e)?e:[e]:[]}function Q(e,t){if(typeof e=="function"){let a=e(t);if(a&&typeof a!="boolean")return M(a)}return[]}function R(e){return e.length?{isInvalid:!0,validationErrors:e,validationDetails:D}:null}function I(e,t){return e===t?!0:!!e&&!!t&&e.isInvalid===t.isInvalid&&e.validationErrors.length===t.validationErrors.length&&e.validationErrors.every((a,r)=>a===t.validationErrors[r])&&Object.entries(e.validationDetails).every(([a,r])=>t.validationDetails[a]===r)}function ie(e,t,a){let{validationBehavior:r,focus:n}=e;U(()=>{if(r==="native"&&a?.current&&!a.current.disabled){let s=t.realtimeValidation.isInvalid?t.realtimeValidation.validationErrors.join(" ")||"Invalid value.":"";a.current.setCustomValidity(s),a.current.hasAttribute("title")||(a.current.title=""),t.realtimeValidation.isInvalid||t.updateValidation(K(a.current))}});let i=o.useRef(!1),d=x(()=>{i.current||t.resetValidation()}),c=x(s=>{var l;t.displayValidation.isInvalid||t.commitValidation();let f=a==null||(l=a.current)===null||l===void 0?void 0:l.form;if(!s.defaultPrevented&&a&&f&&Y(f)===a.current){var m;n?n():(m=a.current)===null||m===void 0||m.focus(),k("keyboard")}s.preventDefault()}),v=x(()=>{t.commitValidation()});o.useEffect(()=>{let s=a?.current;if(!s)return;let l=s.form,f=l?.reset;return l&&(l.reset=()=>{i.current=!window.event||window.event.type==="message"&&window.event.target instanceof MessagePort,f?.call(l),i.current=!1}),s.addEventListener("invalid",c),s.addEventListener("change",v),l?.addEventListener("reset",d),()=>{s.removeEventListener("invalid",c),s.removeEventListener("change",v),l?.removeEventListener("reset",d),l&&(l.reset=f)}},[a,c,v,d,r])}function G(e){let t=e.validity;return{badInput:t.badInput,customError:t.customError,patternMismatch:t.patternMismatch,rangeOverflow:t.rangeOverflow,rangeUnderflow:t.rangeUnderflow,stepMismatch:t.stepMismatch,tooLong:t.tooLong,tooShort:t.tooShort,typeMismatch:t.typeMismatch,valueMissing:t.valueMissing,valid:t.valid}}function K(e){return{isInvalid:!e.validity.valid,validationDetails:G(e),validationErrors:e.validationMessage?[e.validationMessage]:[]}}function Y(e){for(let t=0;t<e.elements.length;t++){let a=e.elements[t];if(!a.validity.valid)return a}return null}var L=Symbol("default");function H(e){const t=o.useRef(null),a=o.useRef(void 0),r=o.useCallback(n=>{if(typeof e=="function"){const i=e,d=i(n);return()=>{typeof d=="function"?d():i(null)}}else if(e)return e.current=n,()=>{e.current=null}},[e]);return o.useMemo(()=>({get current(){return t.current},set current(n){t.current=n,a.current&&(a.current(),a.current=void 0),n!=null&&(a.current=r(n))}}),[r])}function J(e,t){let a=o.useContext(e);if(t===null)return null;if(a&&typeof a=="object"&&"slots"in a&&a.slots){let r=new Intl.ListFormat().format(Object.keys(a.slots).map(i=>`"${i}"`));if(!t&&!a.slots[L])throw new Error(`A slot prop is required. Valid slot names are ${r}.`);let n=t||L;if(!a.slots[n])throw new Error(`Invalid slot "${t}". Valid slot names are ${r}.`);return a.slots[n]}return a}function W(e,t,a){let r=J(a,e.slot)||{},{ref:n,...i}=r,d=H(o.useMemo(()=>N(t,n),[t,n])),c=_(i,e);return"style"in i&&i.style&&"style"in e&&e.style&&(typeof i.style=="function"||typeof e.style=="function"?c.style=v=>{let s=typeof i.style=="function"?i.style(v):i.style,l={...v.defaultStyle,...s},f=typeof e.style=="function"?e.style({...v,defaultStyle:l}):e.style;return{...l,...f}}:c.style={...i.style,...e.style}),[c,d]}var j=o.createContext(null);o.forwardRef(function(t,a){[t,a]=W(t,a,j);let{validationErrors:r,validationBehavior:n="native",children:i,className:d,...c}=t;const v=o.useMemo(()=>q({className:d}),[d]);return $.jsx("form",{noValidate:n!=="native",...c,ref:a,className:v,children:$.jsx(j.Provider,{value:{...t,validationBehavior:n},children:$.jsx(F.Provider,{value:r??{},children:i})})})});export{ae as $,te as C,j as F,ie as a,C as b,y as c,J as u};
