import{R as H,ap as ne,b6 as He,b7 as We,b8 as se,b9 as Be,az as Le,ba as Fe,ay as j,r as w,H as Ge,J as D,bb as je,bc as ze,b3 as R,bd as x,be as Ye,bf as Xe,s as ge,v as Je,w as qe,bg as Qe,bh as Te,aI as Ze}from"./index-Dil6rDqS.js";import{c as et,b as Ae,d as tt,e as rt,a as nt}from"./useFocusable-Db5-b0Ky.js";const C=typeof document<"u"?H.useLayoutEffect:()=>{},k=e=>{var t;return(t=e==null?void 0:e.ownerDocument)!==null&&t!==void 0?t:document},it=e=>e&&"window"in e&&e.window===e?e:k(e).defaultView||window;function ot(e){return e!==null&&typeof e=="object"&&"nodeType"in e&&typeof e.nodeType=="number"}function at(e){return ot(e)&&e.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&"host"in e}function Ne(e,t){if(!ne())return t&&e?e.contains(t):!1;if(!e||!t)return!1;let r=t;for(;r!==null;){if(r===e)return!0;r.tagName==="SLOT"&&r.assignedSlot?r=r.assignedSlot.parentNode:at(r)?r=r.host:r=r.parentNode}return!1}const I=(e=document)=>{var t;if(!ne())return e.activeElement;let r=e.activeElement;for(;r&&"shadowRoot"in r&&(!((t=r.shadowRoot)===null||t===void 0)&&t.activeElement);)r=r.shadowRoot.activeElement;return r};function G(e){return ne()&&e.target.shadowRoot&&e.composedPath?e.composedPath()[0]:e.target}class st{get currentNode(){return this._currentNode}set currentNode(t){if(!Ne(this.root,t))throw new Error("Cannot set currentNode to a node that is not contained by the root node.");const r=[];let n=t,i=t;for(this._currentNode=t;n&&n!==this.root;)if(n.nodeType===Node.DOCUMENT_FRAGMENT_NODE){const l=n,s=this._doc.createTreeWalker(l,this.whatToShow,{acceptNode:this._acceptNode});r.push(s),s.currentNode=i,this._currentSetFor.add(s),n=i=l.host}else n=n.parentNode;const a=this._doc.createTreeWalker(this.root,this.whatToShow,{acceptNode:this._acceptNode});r.push(a),a.currentNode=i,this._currentSetFor.add(a),this._walkerStack=r}get doc(){return this._doc}firstChild(){let t=this.currentNode,r=this.nextNode();return Ne(t,r)?(r&&(this.currentNode=r),r):(this.currentNode=t,null)}lastChild(){let r=this._walkerStack[0].lastChild();return r&&(this.currentNode=r),r}nextNode(){const t=this._walkerStack[0].nextNode();if(t){if(t.shadowRoot){var r;let i;if(typeof this.filter=="function"?i=this.filter(t):!((r=this.filter)===null||r===void 0)&&r.acceptNode&&(i=this.filter.acceptNode(t)),i===NodeFilter.FILTER_ACCEPT)return this.currentNode=t,t;let a=this.nextNode();return a&&(this.currentNode=a),a}return t&&(this.currentNode=t),t}else if(this._walkerStack.length>1){this._walkerStack.shift();let n=this.nextNode();return n&&(this.currentNode=n),n}else return null}previousNode(){const t=this._walkerStack[0];if(t.currentNode===t.root){if(this._currentSetFor.has(t))if(this._currentSetFor.delete(t),this._walkerStack.length>1){this._walkerStack.shift();let i=this.previousNode();return i&&(this.currentNode=i),i}else return null;return null}const r=t.previousNode();if(r){if(r.shadowRoot){var n;let a;if(typeof this.filter=="function"?a=this.filter(r):!((n=this.filter)===null||n===void 0)&&n.acceptNode&&(a=this.filter.acceptNode(r)),a===NodeFilter.FILTER_ACCEPT)return r&&(this.currentNode=r),r;let l=this.lastChild();return l&&(this.currentNode=l),l}return r&&(this.currentNode=r),r}else if(this._walkerStack.length>1){this._walkerStack.shift();let i=this.previousNode();return i&&(this.currentNode=i),i}else return null}nextSibling(){return null}previousSibling(){return null}parentNode(){return null}constructor(t,r,n,i){this._walkerStack=[],this._currentSetFor=new Set,this._acceptNode=l=>{if(l.nodeType===Node.ELEMENT_NODE){const b=l.shadowRoot;if(b){const d=this._doc.createTreeWalker(b,this.whatToShow,{acceptNode:this._acceptNode});return this._walkerStack.unshift(d),NodeFilter.FILTER_ACCEPT}else{var s;if(typeof this.filter=="function")return this.filter(l);if(!((s=this.filter)===null||s===void 0)&&s.acceptNode)return this.filter.acceptNode(l);if(this.filter===null)return NodeFilter.FILTER_ACCEPT}}return NodeFilter.FILTER_SKIP},this._doc=t,this.root=r,this.filter=i??null,this.whatToShow=n??NodeFilter.SHOW_ALL,this._currentNode=r,this._walkerStack.unshift(t.createTreeWalker(r,n,this._acceptNode));const a=r.shadowRoot;if(a){const l=this._doc.createTreeWalker(a,this.whatToShow,{acceptNode:this._acceptNode});this._walkerStack.unshift(l)}}}function lt(e,t,r,n){return ne()?new st(e,t,r,n):e.createTreeWalker(t,r,n)}function fe(e){var t;if(typeof window>"u"||window.navigator==null)return!1;let r=(t=window.navigator.userAgentData)===null||t===void 0?void 0:t.brands;return Array.isArray(r)&&r.some(n=>e.test(n.brand))||e.test(window.navigator.userAgent)}function pe(e){var t;return typeof window<"u"&&window.navigator!=null?e.test(((t=window.navigator.userAgentData)===null||t===void 0?void 0:t.platform)||window.navigator.platform):!1}function W(e){let t=null;return()=>(t==null&&(t=e()),t)}const ct=W(function(){return pe(/^Mac/i)}),ut=W(function(){return pe(/^iPhone/i)}),dt=W(function(){return pe(/^iPad/i)||ct()&&navigator.maxTouchPoints>1}),Lt=W(function(){return ut()||dt()}),Ft=W(function(){return fe(/AppleWebKit/i)&&!Ie()}),Ie=W(function(){return fe(/Chrome/i)}),ft=W(function(){return fe(/Android/i)}),pt=typeof Element<"u"&&"checkVisibility"in Element.prototype;function vt(e){const t=it(e);if(!(e instanceof t.HTMLElement)&&!(e instanceof t.SVGElement))return!1;let{display:r,visibility:n}=e.style,i=r!=="none"&&n!=="hidden"&&n!=="collapse";if(i){const{getComputedStyle:a}=e.ownerDocument.defaultView;let{display:l,visibility:s}=a(e);i=l!=="none"&&s!=="hidden"&&s!=="collapse"}return i}function bt(e,t){return!e.hasAttribute("hidden")&&!e.hasAttribute("data-react-aria-prevent-focus")&&(e.nodeName==="DETAILS"&&t&&t.nodeName!=="SUMMARY"?e.hasAttribute("open"):!0)}function ve(e,t){return pt?e.checkVisibility():e.nodeName!=="#comment"&&vt(e)&&bt(e,t)&&(!e.parentElement||ve(e.parentElement,e))}const be=["input:not([disabled]):not([type=hidden])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","a[href]","area[href]","summary","iframe","object","embed","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable^="false"])',"permission"],$t=be.join(":not([hidden]),")+",[tabindex]:not([disabled]):not([hidden])";be.push('[tabindex]:not([tabindex="-1"]):not([disabled])');const ht=be.join(':not([hidden]):not([tabindex="-1"]),');function Et(e){return e.matches($t)&&ve(e)&&!Me(e)}function yt(e){return e.matches(ht)&&ve(e)&&!Me(e)}function Me(e){let t=e;for(;t!=null;){if(t instanceof t.ownerDocument.defaultView.HTMLElement&&t.inert)return!0;t=t.parentElement}return!1}function Q(e,t,r=!0){var n,i;let{metaKey:a,ctrlKey:l,altKey:s,shiftKey:b}=t;He()&&(!((i=window.event)===null||i===void 0||(n=i.type)===null||n===void 0)&&n.startsWith("key"))&&e.target==="_blank"&&(se()?a=!0:l=!0);let d=We()&&se()&&!Be()?new KeyboardEvent("keydown",{keyIdentifier:"Enter",metaKey:a,ctrlKey:l,altKey:s,shiftKey:b}):new MouseEvent("click",{metaKey:a,ctrlKey:l,altKey:s,shiftKey:b,bubbles:!0,cancelable:!0});Q.isOpening=r,Le(e),e.dispatchEvent(d),Q.isOpening=!1}Q.isOpening=!1;let z="default",le="",te=new WeakMap;function gt(e){if(Fe()){if(z==="default"){const t=j(e);le=t.documentElement.style.webkitUserSelect,t.documentElement.style.webkitUserSelect="none"}z="disabled"}else if(e instanceof HTMLElement||e instanceof SVGElement){let t="userSelect"in e.style?"userSelect":"webkitUserSelect";te.set(e,e.style[t]),e.style[t]="none"}}function me(e){if(Fe()){if(z!=="disabled")return;z="restoring",setTimeout(()=>{et(()=>{if(z==="restoring"){const t=j(e);t.documentElement.style.webkitUserSelect==="none"&&(t.documentElement.style.webkitUserSelect=le||""),le="",z="default"}})},300)}else if((e instanceof HTMLElement||e instanceof SVGElement)&&e&&te.has(e)){let t=te.get(e),r="userSelect"in e.style?"userSelect":"webkitUserSelect";e.style[r]==="none"&&(e.style[r]=t),e.getAttribute("style")===""&&e.removeAttribute("style"),te.delete(e)}}const Ke=H.createContext({register:()=>{}});Ke.displayName="PressResponderContext";function Tt(e){let t=w.useContext(Ke);if(t){let{register:r,...n}=t;e=Ae(n,e),r()}return tt(t,e.ref),e}var Z=new WeakMap;class ee{continuePropagation(){ge(this,Z,!1)}get shouldStopPropagation(){return Je(this,Z)}constructor(t,r,n,i){qe(this,Z,{writable:!0,value:void 0}),ge(this,Z,!0);var a;let l=(a=i==null?void 0:i.target)!==null&&a!==void 0?a:n.currentTarget;const s=l==null?void 0:l.getBoundingClientRect();let b,d=0,h,f=null;n.clientX!=null&&n.clientY!=null&&(h=n.clientX,f=n.clientY),s&&(h!=null&&f!=null?(b=h-s.left,d=f-s.top):(b=s.width/2,d=s.height/2)),this.type=t,this.pointerType=r,this.target=n.currentTarget,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.x=b,this.y=d}}const we=Symbol("linkClicked"),Se="react-aria-pressable-style",xe="data-react-aria-pressable";function At(e){let{onPress:t,onPressChange:r,onPressStart:n,onPressEnd:i,onPressUp:a,onClick:l,isDisabled:s,isPressed:b,preventFocusOnPress:d,shouldCancelOnPointerExit:h,allowTextSelectionOnPress:f,ref:p,...$}=Tt(e),[y,L]=w.useState(!1),_=w.useRef({isPressed:!1,ignoreEmulatedMouseEvents:!1,didFirePressStart:!1,isTriggeringEvent:!1,activePointerId:null,target:null,isOverTarget:!1,pointerType:null,disposables:[]}),{addGlobalListener:Y,removeAllGlobalListeners:ie}=Ge(),X=D((o,v)=>{let m=_.current;if(s||m.didFirePressStart)return!1;let c=!0;if(m.isTriggeringEvent=!0,n){let g=new ee("pressstart",v,o);n(g),c=g.shouldStopPropagation}return r&&r(!0),m.isTriggeringEvent=!1,m.didFirePressStart=!0,L(!0),c}),B=D((o,v,m=!0)=>{let c=_.current;if(!c.didFirePressStart)return!1;c.didFirePressStart=!1,c.isTriggeringEvent=!0;let g=!0;if(i){let u=new ee("pressend",v,o);i(u),g=u.shouldStopPropagation}if(r&&r(!1),L(!1),t&&m&&!s){let u=new ee("press",v,o);t(u),g&&(g=u.shouldStopPropagation)}return c.isTriggeringEvent=!1,g}),J=D((o,v)=>{let m=_.current;if(s)return!1;if(a){m.isTriggeringEvent=!0;let c=new ee("pressup",v,o);return a(c),m.isTriggeringEvent=!1,c.shouldStopPropagation}return!0}),O=D(o=>{let v=_.current;if(v.isPressed&&v.target){v.didFirePressStart&&v.pointerType!=null&&B(U(v.target,o),v.pointerType,!1),v.isPressed=!1,v.isOverTarget=!1,v.activePointerId=null,v.pointerType=null,ie(),f||me(v.target);for(let m of v.disposables)m();v.disposables=[]}}),Ee=D(o=>{h&&O(o)}),oe=D(o=>{l==null||l(o)}),ye=D((o,v)=>{if(l){let m=new MouseEvent("click",o);je(m,v),l(ze(m))}}),Ve=w.useMemo(()=>{let o=_.current,v={onKeyDown(c){if(ae(c.nativeEvent,c.currentTarget)&&R(c.currentTarget,x(c.nativeEvent))){var g;ke(x(c.nativeEvent),c.key)&&c.preventDefault();let u=!0;if(!o.isPressed&&!c.repeat){o.target=c.currentTarget,o.isPressed=!0,o.pointerType="keyboard",u=X(c,"keyboard");let N=c.currentTarget,S=F=>{ae(F,N)&&!F.repeat&&R(N,x(F))&&o.target&&J(U(o.target,F),"keyboard")};Y(j(c.currentTarget),"keyup",rt(S,m),!0)}u&&c.stopPropagation(),c.metaKey&&se()&&((g=o.metaKeyEvents)===null||g===void 0||g.set(c.key,c.nativeEvent))}else c.key==="Meta"&&(o.metaKeyEvents=new Map)},onClick(c){if(!(c&&!R(c.currentTarget,x(c.nativeEvent)))&&c&&c.button===0&&!o.isTriggeringEvent&&!Q.isOpening){let g=!0;if(s&&c.preventDefault(),!o.ignoreEmulatedMouseEvents&&!o.isPressed&&(o.pointerType==="virtual"||Qe(c.nativeEvent))){let u=X(c,"virtual"),N=J(c,"virtual"),S=B(c,"virtual");oe(c),g=u&&N&&S}else if(o.isPressed&&o.pointerType!=="keyboard"){let u=o.pointerType||c.nativeEvent.pointerType||"virtual",N=J(U(c.currentTarget,c),u),S=B(U(c.currentTarget,c),u,!0);g=N&&S,o.isOverTarget=!1,oe(c),O(c)}o.ignoreEmulatedMouseEvents=!1,g&&c.stopPropagation()}}},m=c=>{var g;if(o.isPressed&&o.target&&ae(c,o.target)){var u;ke(x(c),c.key)&&c.preventDefault();let S=x(c),F=R(o.target,x(c));B(U(o.target,c),"keyboard",F),F&&ye(c,o.target),ie(),c.key!=="Enter"&&$e(o.target)&&R(o.target,S)&&!c[we]&&(c[we]=!0,Q(o.target,c,!1)),o.isPressed=!1,(u=o.metaKeyEvents)===null||u===void 0||u.delete(c.key)}else if(c.key==="Meta"&&(!((g=o.metaKeyEvents)===null||g===void 0)&&g.size)){var N;let S=o.metaKeyEvents;o.metaKeyEvents=void 0;for(let F of S.values())(N=o.target)===null||N===void 0||N.dispatchEvent(new KeyboardEvent("keyup",F))}};if(typeof PointerEvent<"u"){v.onPointerDown=u=>{if(u.button!==0||!R(u.currentTarget,x(u.nativeEvent)))return;if(Ye(u.nativeEvent)){o.pointerType="virtual";return}o.pointerType=u.pointerType;let N=!0;if(!o.isPressed){o.isPressed=!0,o.isOverTarget=!0,o.activePointerId=u.pointerId,o.target=u.currentTarget,f||gt(o.target),N=X(u,o.pointerType);let S=x(u.nativeEvent);"releasePointerCapture"in S&&S.releasePointerCapture(u.pointerId),Y(j(u.currentTarget),"pointerup",c,!1),Y(j(u.currentTarget),"pointercancel",g,!1)}N&&u.stopPropagation()},v.onMouseDown=u=>{if(R(u.currentTarget,x(u.nativeEvent))&&u.button===0){if(d){let N=Xe(u.target);N&&o.disposables.push(N)}u.stopPropagation()}},v.onPointerUp=u=>{!R(u.currentTarget,x(u.nativeEvent))||o.pointerType==="virtual"||u.button===0&&!o.isPressed&&J(u,o.pointerType||u.pointerType)},v.onPointerEnter=u=>{u.pointerId===o.activePointerId&&o.target&&!o.isOverTarget&&o.pointerType!=null&&(o.isOverTarget=!0,X(U(o.target,u),o.pointerType))},v.onPointerLeave=u=>{u.pointerId===o.activePointerId&&o.target&&o.isOverTarget&&o.pointerType!=null&&(o.isOverTarget=!1,B(U(o.target,u),o.pointerType,!1),Ee(u))};let c=u=>{if(u.pointerId===o.activePointerId&&o.isPressed&&u.button===0&&o.target){if(R(o.target,x(u))&&o.pointerType!=null){let N=!1,S=setTimeout(()=>{o.isPressed&&o.target instanceof HTMLElement&&(N?O(u):(Le(o.target),o.target.click()))},80);Y(u.currentTarget,"click",()=>N=!0,!0),o.disposables.push(()=>clearTimeout(S))}else O(u);o.isOverTarget=!1}},g=u=>{O(u)};v.onDragStart=u=>{R(u.currentTarget,x(u.nativeEvent))&&O(u)}}return v},[Y,s,d,ie,f,O,Ee,B,X,J,oe,ye]);return w.useEffect(()=>{if(!p)return;const o=j(p.current);if(!o||!o.head||o.getElementById(Se))return;const v=o.createElement("style");v.id=Se,v.textContent=`
@layer {
  [${xe}] {
    touch-action: pan-x pan-y pinch-zoom;
  }
}
    `.trim(),o.head.prepend(v)},[p]),w.useEffect(()=>{let o=_.current;return()=>{var v;f||me((v=o.target)!==null&&v!==void 0?v:void 0);for(let m of o.disposables)m();o.disposables=[]}},[f]),{isPressed:b||y,pressProps:Ae($,Ve,{[xe]:!0})}}function $e(e){return e.tagName==="A"&&e.hasAttribute("href")}function ae(e,t){const{key:r,code:n}=e,i=t,a=i.getAttribute("role");return(r==="Enter"||r===" "||r==="Spacebar"||n==="Space")&&!(i instanceof Te(i).HTMLInputElement&&!Oe(i,r)||i instanceof Te(i).HTMLTextAreaElement||i.isContentEditable)&&!((a==="link"||!a&&$e(i))&&r!=="Enter")}function U(e,t){let r=t.clientX,n=t.clientY;return{currentTarget:e,shiftKey:t.shiftKey,ctrlKey:t.ctrlKey,metaKey:t.metaKey,altKey:t.altKey,clientX:r,clientY:n}}function Nt(e){return e instanceof HTMLInputElement?!1:e instanceof HTMLButtonElement?e.type!=="submit"&&e.type!=="reset":!$e(e)}function ke(e,t){return e instanceof HTMLInputElement?!Oe(e,t):Nt(e)}const mt=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function Oe(e,t){return e.type==="checkbox"||e.type==="radio"?t===" ":mt.has(e.type)}const Pe=H.createContext(null),ce="react-aria-focus-scope-restore";let E=null;function It(e){let{children:t,contain:r,restoreFocus:n,autoFocus:i}=e,a=w.useRef(null),l=w.useRef(null),s=w.useRef([]),{parentNode:b}=w.useContext(Pe)||{},d=w.useMemo(()=>new de({scopeRef:s}),[s]);C(()=>{let p=b||T.root;if(T.getTreeNode(p.scopeRef)&&E&&!re(E,p.scopeRef)){let $=T.getTreeNode(E);$&&(p=$)}p.addChild(d),T.addNode(d)},[d,b]),C(()=>{let p=T.getTreeNode(s);p&&(p.contain=!!r)},[r]),C(()=>{var p;let $=(p=a.current)===null||p===void 0?void 0:p.nextSibling,y=[],L=_=>_.stopPropagation();for(;$&&$!==l.current;)y.push($),$.addEventListener(ce,L),$=$.nextSibling;return s.current=y,()=>{for(let _ of y)_.removeEventListener(ce,L)}},[t]),Pt(s,n,r),xt(s,r),_t(s,n,r),kt(s,i),w.useEffect(()=>{const p=I(k(s.current?s.current[0]:void 0));let $=null;if(P(p,s.current)){for(let y of T.traverse())y.scopeRef&&P(p,y.scopeRef.current)&&($=y);$===T.getTreeNode(s)&&(E=$.scopeRef)}},[s]),C(()=>()=>{var p,$,y;let L=(y=($=T.getTreeNode(s))===null||$===void 0||(p=$.parent)===null||p===void 0?void 0:p.scopeRef)!==null&&y!==void 0?y:null;(s===E||re(s,E))&&(!L||T.getTreeNode(L))&&(E=L),T.removeTreeNode(s)},[s]);let h=w.useMemo(()=>wt(s),[]),f=w.useMemo(()=>({focusManager:h,parentNode:d}),[d,h]);return H.createElement(Pe.Provider,{value:f},H.createElement("span",{"data-focus-scope-start":!0,hidden:!0,ref:a}),t,H.createElement("span",{"data-focus-scope-end":!0,hidden:!0,ref:l}))}function wt(e){return{focusNext(t={}){let r=e.current,{from:n,tabbable:i,wrap:a,accept:l}=t;var s;let b=n||I(k((s=r[0])!==null&&s!==void 0?s:void 0)),d=r[0].previousElementSibling,h=V(r),f=K(h,{tabbable:i,accept:l},r);f.currentNode=P(b,r)?b:d;let p=f.nextNode();return!p&&a&&(f.currentNode=d,p=f.nextNode()),p&&A(p,!0),p},focusPrevious(t={}){let r=e.current,{from:n,tabbable:i,wrap:a,accept:l}=t;var s;let b=n||I(k((s=r[0])!==null&&s!==void 0?s:void 0)),d=r[r.length-1].nextElementSibling,h=V(r),f=K(h,{tabbable:i,accept:l},r);f.currentNode=P(b,r)?b:d;let p=f.previousNode();return!p&&a&&(f.currentNode=d,p=f.previousNode()),p&&A(p,!0),p},focusFirst(t={}){let r=e.current,{tabbable:n,accept:i}=t,a=V(r),l=K(a,{tabbable:n,accept:i},r);l.currentNode=r[0].previousElementSibling;let s=l.nextNode();return s&&A(s,!0),s},focusLast(t={}){let r=e.current,{tabbable:n,accept:i}=t,a=V(r),l=K(a,{tabbable:n,accept:i},r);l.currentNode=r[r.length-1].nextElementSibling;let s=l.previousNode();return s&&A(s,!0),s}}}function V(e){return e[0].parentElement}function q(e){let t=T.getTreeNode(E);for(;t&&t.scopeRef!==e;){if(t.contain)return!1;t=t.parent}return!0}function St(e){if(e.checked)return!0;let t=[];if(!e.form)t=[...k(e).querySelectorAll(`input[type="radio"][name="${CSS.escape(e.name)}"]`)].filter(a=>!a.form);else{var r,n;let a=(n=e.form)===null||n===void 0||(r=n.elements)===null||r===void 0?void 0:r.namedItem(e.name);t=[...a??[]]}return t?!t.some(a=>a.checked):!1}function xt(e,t){let r=w.useRef(void 0),n=w.useRef(void 0);C(()=>{let i=e.current;if(!t){n.current&&(cancelAnimationFrame(n.current),n.current=void 0);return}const a=k(i?i[0]:void 0);let l=d=>{if(d.key!=="Tab"||d.altKey||d.ctrlKey||d.metaKey||!q(e)||d.isComposing)return;let h=I(a),f=e.current;if(!f||!P(h,f))return;let p=V(f),$=K(p,{tabbable:!0},f);if(!h)return;$.currentNode=h;let y=d.shiftKey?$.previousNode():$.nextNode();y||($.currentNode=d.shiftKey?f[f.length-1].nextElementSibling:f[0].previousElementSibling,y=d.shiftKey?$.previousNode():$.nextNode()),d.preventDefault(),y&&A(y,!0)},s=d=>{(!E||re(E,e))&&P(G(d),e.current)?(E=e,r.current=G(d)):q(e)&&!M(G(d),e)?r.current?r.current.focus():E&&E.current&&ue(E.current):q(e)&&(r.current=G(d))},b=d=>{n.current&&cancelAnimationFrame(n.current),n.current=requestAnimationFrame(()=>{let h=Ze(),f=(h==="virtual"||h===null)&&ft()&&Ie(),p=I(a);if(!f&&p&&q(e)&&!M(p,e)){E=e;let y=G(d);if(y&&y.isConnected){var $;r.current=y,($=r.current)===null||$===void 0||$.focus()}else E.current&&ue(E.current)}})};return a.addEventListener("keydown",l,!1),a.addEventListener("focusin",s,!1),i==null||i.forEach(d=>d.addEventListener("focusin",s,!1)),i==null||i.forEach(d=>d.addEventListener("focusout",b,!1)),()=>{a.removeEventListener("keydown",l,!1),a.removeEventListener("focusin",s,!1),i==null||i.forEach(d=>d.removeEventListener("focusin",s,!1)),i==null||i.forEach(d=>d.removeEventListener("focusout",b,!1))}},[e,t]),C(()=>()=>{n.current&&cancelAnimationFrame(n.current)},[n])}function De(e){return M(e)}function P(e,t){return!e||!t?!1:t.some(r=>r.contains(e))}function M(e,t=null){if(e instanceof Element&&e.closest("[data-react-aria-top-layer]"))return!0;for(let{scopeRef:r}of T.traverse(T.getTreeNode(t)))if(r&&P(e,r.current))return!0;return!1}function Mt(e){return M(e,E)}function re(e,t){var r;let n=(r=T.getTreeNode(t))===null||r===void 0?void 0:r.parent;for(;n;){if(n.scopeRef===e)return!0;n=n.parent}return!1}function A(e,t=!1){if(e!=null&&!t)try{nt(e)}catch{}else if(e!=null)try{e.focus()}catch{}}function Ue(e,t=!0){let r=e[0].previousElementSibling,n=V(e),i=K(n,{tabbable:t},e);i.currentNode=r;let a=i.nextNode();return t&&!a&&(n=V(e),i=K(n,{tabbable:!1},e),i.currentNode=r,a=i.nextNode()),a}function ue(e,t=!0){A(Ue(e,t))}function kt(e,t){const r=H.useRef(t);w.useEffect(()=>{if(r.current){E=e;const n=k(e.current?e.current[0]:void 0);!P(I(n),E.current)&&e.current&&ue(e.current)}r.current=!1},[e])}function Pt(e,t,r){C(()=>{if(t||r)return;let n=e.current;const i=k(n?n[0]:void 0);let a=l=>{let s=G(l);P(s,e.current)?E=e:De(s)||(E=null)};return i.addEventListener("focusin",a,!1),n==null||n.forEach(l=>l.addEventListener("focusin",a,!1)),()=>{i.removeEventListener("focusin",a,!1),n==null||n.forEach(l=>l.removeEventListener("focusin",a,!1))}},[e,t,r])}function _e(e){let t=T.getTreeNode(E);for(;t&&t.scopeRef!==e;){if(t.nodeToRestore)return!1;t=t.parent}return(t==null?void 0:t.scopeRef)===e}function _t(e,t,r){const n=w.useRef(typeof document<"u"?I(k(e.current?e.current[0]:void 0)):null);C(()=>{let i=e.current;const a=k(i?i[0]:void 0);if(!t||r)return;let l=()=>{(!E||re(E,e))&&P(I(a),e.current)&&(E=e)};return a.addEventListener("focusin",l,!1),i==null||i.forEach(s=>s.addEventListener("focusin",l,!1)),()=>{a.removeEventListener("focusin",l,!1),i==null||i.forEach(s=>s.removeEventListener("focusin",l,!1))}},[e,r]),C(()=>{const i=k(e.current?e.current[0]:void 0);if(!t)return;let a=l=>{if(l.key!=="Tab"||l.altKey||l.ctrlKey||l.metaKey||!q(e)||l.isComposing)return;let s=i.activeElement;if(!M(s,e)||!_e(e))return;let b=T.getTreeNode(e);if(!b)return;let d=b.nodeToRestore,h=K(i.body,{tabbable:!0});h.currentNode=s;let f=l.shiftKey?h.previousNode():h.nextNode();if((!d||!d.isConnected||d===i.body)&&(d=void 0,b.nodeToRestore=void 0),(!f||!M(f,e))&&d){h.currentNode=d;do f=l.shiftKey?h.previousNode():h.nextNode();while(M(f,e));l.preventDefault(),l.stopPropagation(),f?A(f,!0):De(d)?A(d,!0):s.blur()}};return r||i.addEventListener("keydown",a,!0),()=>{r||i.removeEventListener("keydown",a,!0)}},[e,t,r]),C(()=>{const i=k(e.current?e.current[0]:void 0);if(!t)return;let a=T.getTreeNode(e);if(a){var l;return a.nodeToRestore=(l=n.current)!==null&&l!==void 0?l:void 0,()=>{let s=T.getTreeNode(e);if(!s)return;let b=s.nodeToRestore,d=I(i);if(t&&b&&(d&&M(d,e)||d===i.body&&_e(e))){let h=T.clone();requestAnimationFrame(()=>{if(i.activeElement===i.body){let f=h.getTreeNode(e);for(;f;){if(f.nodeToRestore&&f.nodeToRestore.isConnected){Re(f.nodeToRestore);return}f=f.parent}for(f=h.getTreeNode(e);f;){if(f.scopeRef&&f.scopeRef.current&&T.getTreeNode(f.scopeRef)){let p=Ue(f.scopeRef.current,!0);Re(p);return}f=f.parent}}})}}}},[e,t])}function Re(e){e.dispatchEvent(new CustomEvent(ce,{bubbles:!0,cancelable:!0}))&&A(e)}function K(e,t,r){let n=t!=null&&t.tabbable?yt:Et,i=(e==null?void 0:e.nodeType)===Node.ELEMENT_NODE?e:null,a=k(i),l=lt(a,e||a,NodeFilter.SHOW_ELEMENT,{acceptNode(s){var b;return!(t==null||(b=t.from)===null||b===void 0)&&b.contains(s)||t!=null&&t.tabbable&&s.tagName==="INPUT"&&s.getAttribute("type")==="radio"&&(!St(s)||l.currentNode.tagName==="INPUT"&&l.currentNode.type==="radio"&&l.currentNode.name===s.name)?NodeFilter.FILTER_REJECT:n(s)&&(!r||P(s,r))&&(!(t!=null&&t.accept)||t.accept(s))?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});return t!=null&&t.from&&(l.currentNode=t.from),l}class he{get size(){return this.fastMap.size}getTreeNode(t){return this.fastMap.get(t)}addTreeNode(t,r,n){let i=this.fastMap.get(r??null);if(!i)return;let a=new de({scopeRef:t});i.addChild(a),a.parent=i,this.fastMap.set(t,a),n&&(a.nodeToRestore=n)}addNode(t){this.fastMap.set(t.scopeRef,t)}removeTreeNode(t){if(t===null)return;let r=this.fastMap.get(t);if(!r)return;let n=r.parent;for(let a of this.traverse())a!==r&&r.nodeToRestore&&a.nodeToRestore&&r.scopeRef&&r.scopeRef.current&&P(a.nodeToRestore,r.scopeRef.current)&&(a.nodeToRestore=r.nodeToRestore);let i=r.children;n&&(n.removeChild(r),i.size>0&&i.forEach(a=>n&&n.addChild(a))),this.fastMap.delete(r.scopeRef)}*traverse(t=this.root){if(t.scopeRef!=null&&(yield t),t.children.size>0)for(let r of t.children)yield*this.traverse(r)}clone(){var t;let r=new he;var n;for(let i of this.traverse())r.addTreeNode(i.scopeRef,(n=(t=i.parent)===null||t===void 0?void 0:t.scopeRef)!==null&&n!==void 0?n:null,i.nodeToRestore);return r}constructor(){this.fastMap=new Map,this.root=new de({scopeRef:null}),this.fastMap.set(null,this.root)}}class de{addChild(t){this.children.add(t),t.parent=this}removeChild(t){this.children.delete(t),t.parent=void 0}constructor(t){this.children=new Set,this.contain=!1,this.scopeRef=t.scopeRef}}let T=new he;var Ce={ease:[.36,.66,.4,1],easeIn:[.4,0,1,1],easeOut:[0,0,.2,1]},Kt={scaleSpring:{enter:{transform:"scale(1)",opacity:1,transition:{type:"spring",bounce:0,duration:.2}},exit:{transform:"scale(0.85)",opacity:0,transition:{type:"easeOut",duration:.15}}},scaleSpringOpacity:{initial:{opacity:0,transform:"scale(0.8)"},enter:{opacity:1,transform:"scale(1)",transition:{type:"spring",bounce:0,duration:.3}},exit:{opacity:0,transform:"scale(0.96)",transition:{type:"easeOut",bounce:0,duration:.15}}},fade:{enter:{opacity:1,transition:{duration:.4,ease:Ce.ease}},exit:{opacity:0,transition:{duration:.3,ease:Ce.ease}}},collapse:{enter:{opacity:1,height:"auto",transition:{height:{type:"spring",bounce:0,duration:.3},opacity:{easings:"ease",duration:.4}}},exit:{opacity:0,height:0,transition:{easings:"ease",duration:.3}}}};export{me as $,Ce as T,gt as a,At as b,C as c,Kt as d,Ke as e,Lt as f,It as g,Ft as h,Mt as i};
