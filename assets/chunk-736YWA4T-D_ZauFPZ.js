import{r as m,aT as K,aj as N,b7 as h,at as R,ap as D}from"./index-Bw3pDzB7.js";function z(){return typeof window.ResizeObserver<"u"}function Q(e){const{ref:t,onResize:r}=e;m.useEffect(()=>{let o=t==null?void 0:t.current;if(o)if(z()){const n=new window.ResizeObserver(a=>{a.length&&r()});return n.observe(o),()=>{o&&n.unobserve(o)}}else return window.addEventListener("resize",r,!1),()=>{window.removeEventListener("resize",r,!1)}},[r,t])}function X(e,t,r){let[o,n]=m.useState(e||t),a=m.useRef(e!==void 0),l=e!==void 0;m.useEffect(()=>{let u=a.current;u!==l&&console.warn(`WARN: A component changed from ${u?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}.`),a.current=l},[l]);let i=l?e:o,p=m.useCallback((u,...s)=>{let c=(b,...d)=>{r&&(Object.is(i,b)||r(b,...d)),l||(i=b)};typeof u=="function"?(console.warn("We can not support a function callback. See Github Issues for details https://github.com/adobe/react-spectrum/issues/2320"),n((d,...$)=>{let w=u(l?i:d,...$);return c(w,...s),l?d:w})):(l||n(u),c(u,...s))},[l,i,r]);return[i,p]}function V(e){const t=K(e);if(!(e instanceof t.HTMLElement)&&!(e instanceof t.SVGElement))return!1;let{display:r,visibility:o}=e.style,n=r!=="none"&&o!=="hidden"&&o!=="collapse";if(n){const{getComputedStyle:a}=e.ownerDocument.defaultView;let{display:l,visibility:i}=a(e);n=l!=="none"&&i!=="hidden"&&i!=="collapse"}return n}function j(e,t){return!e.hasAttribute("hidden")&&!e.hasAttribute("data-react-aria-prevent-focus")&&(e.nodeName==="DETAILS"&&t&&t.nodeName!=="SUMMARY"?e.hasAttribute("open"):!0)}function O(e,t){return e.nodeName!=="#comment"&&V(e)&&j(e,t)&&(!e.parentElement||O(e.parentElement,e))}const M=R.createContext(null);let f=null;function Z(e){let{children:t,contain:r,restoreFocus:o,autoFocus:n}=e,a=m.useRef(null),l=m.useRef(null),i=m.useRef([]),{parentNode:p}=m.useContext(M)||{},u=m.useMemo(()=>new _({scopeRef:i}),[i]);N(()=>{let b=p||v.root;if(v.getTreeNode(b.scopeRef)&&f&&!F(f,b.scopeRef)){let d=v.getTreeNode(f);d&&(b=d)}b.addChild(u),v.addNode(u)},[u,p]),N(()=>{let b=v.getTreeNode(i);b&&(b.contain=!!r)},[r]),N(()=>{var b;let d=(b=a.current)===null||b===void 0?void 0:b.nextSibling,$=[];for(;d&&d!==l.current;)$.push(d),d=d.nextSibling;i.current=$},[t]),H(i,o,r),G(i,r),J(i,o,r),q(i,n),m.useEffect(()=>{const b=h(i.current?i.current[0]:void 0).activeElement;let d=null;if(E(b,i.current)){for(let $ of v.traverse())$.scopeRef&&E(b,$.scopeRef.current)&&(d=$);d===v.getTreeNode(i)&&(f=d.scopeRef)}},[i]),N(()=>()=>{var b,d,$;let w=($=(d=v.getTreeNode(i))===null||d===void 0||(b=d.parent)===null||b===void 0?void 0:b.scopeRef)!==null&&$!==void 0?$:null;(i===f||F(i,f))&&(!w||v.getTreeNode(w))&&(f=w),v.removeTreeNode(i)},[i]);let s=m.useMemo(()=>B(i),[]),c=m.useMemo(()=>({focusManager:s,parentNode:u}),[u,s]);return R.createElement(M.Provider,{value:c},R.createElement("span",{"data-focus-scope-start":!0,hidden:!0,ref:a}),t,R.createElement("span",{"data-focus-scope-end":!0,hidden:!0,ref:l}))}function B(e){return{focusNext(t={}){let r=e.current,{from:o,tabbable:n,wrap:a,accept:l}=t,i=o||h(r[0]).activeElement,p=r[0].previousElementSibling,u=y(r),s=g(u,{tabbable:n,accept:l},r);s.currentNode=E(i,r)?i:p;let c=s.nextNode();return!c&&a&&(s.currentNode=p,c=s.nextNode()),c&&T(c,!0),c},focusPrevious(t={}){let r=e.current,{from:o,tabbable:n,wrap:a,accept:l}=t,i=o||h(r[0]).activeElement,p=r[r.length-1].nextElementSibling,u=y(r),s=g(u,{tabbable:n,accept:l},r);s.currentNode=E(i,r)?i:p;let c=s.previousNode();return!c&&a&&(s.currentNode=p,c=s.previousNode()),c&&T(c,!0),c},focusFirst(t={}){let r=e.current,{tabbable:o,accept:n}=t,a=y(r),l=g(a,{tabbable:o,accept:n},r);l.currentNode=r[0].previousElementSibling;let i=l.nextNode();return i&&T(i,!0),i},focusLast(t={}){let r=e.current,{tabbable:o,accept:n}=t,a=y(r),l=g(a,{tabbable:o,accept:n},r);l.currentNode=r[r.length-1].nextElementSibling;let i=l.previousNode();return i&&T(i,!0),i}}}const A=["input:not([disabled]):not([type=hidden])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","a[href]","area[href]","summary","iframe","object","embed","audio[controls]","video[controls]","[contenteditable]"],P=A.join(":not([hidden]),")+",[tabindex]:not([disabled]):not([hidden])";A.push('[tabindex]:not([tabindex="-1"]):not([disabled])');const W=A.join(':not([hidden]):not([tabindex="-1"]),');function y(e){return e[0].parentElement}function S(e){let t=v.getTreeNode(f);for(;t&&t.scopeRef!==e;){if(t.contain)return!1;t=t.parent}return!0}function G(e,t){let r=m.useRef(),o=m.useRef();N(()=>{let n=e.current;if(!t){o.current&&(cancelAnimationFrame(o.current),o.current=void 0);return}const a=h(n?n[0]:void 0);let l=u=>{if(u.key!=="Tab"||u.altKey||u.ctrlKey||u.metaKey||!S(e)||u.isComposing)return;let s=a.activeElement,c=e.current;if(!c||!E(s,c))return;let b=y(c),d=g(b,{tabbable:!0},c);if(!s)return;d.currentNode=s;let $=u.shiftKey?d.previousNode():d.nextNode();$||(d.currentNode=u.shiftKey?c[c.length-1].nextElementSibling:c[0].previousElementSibling,$=u.shiftKey?d.previousNode():d.nextNode()),u.preventDefault(),$&&T($,!0)},i=u=>{(!f||F(f,e))&&E(u.target,e.current)?(f=e,r.current=u.target):S(e)&&!L(u.target,e)?r.current?r.current.focus():f&&f.current&&C(f.current):S(e)&&(r.current=u.target)},p=u=>{o.current&&cancelAnimationFrame(o.current),o.current=requestAnimationFrame(()=>{if(a.activeElement&&S(e)&&!L(a.activeElement,e))if(f=e,a.body.contains(u.target)){var s;r.current=u.target,(s=r.current)===null||s===void 0||s.focus()}else f.current&&C(f.current)})};return a.addEventListener("keydown",l,!1),a.addEventListener("focusin",i,!1),n==null||n.forEach(u=>u.addEventListener("focusin",i,!1)),n==null||n.forEach(u=>u.addEventListener("focusout",p,!1)),()=>{a.removeEventListener("keydown",l,!1),a.removeEventListener("focusin",i,!1),n==null||n.forEach(u=>u.removeEventListener("focusin",i,!1)),n==null||n.forEach(u=>u.removeEventListener("focusout",p,!1))}},[e,t]),N(()=>()=>{o.current&&cancelAnimationFrame(o.current)},[o])}function k(e){return L(e)}function E(e,t){return!e||!t?!1:t.some(r=>r.contains(e))}function L(e,t=null){if(e instanceof Element&&e.closest("[data-react-aria-top-layer]"))return!0;for(let{scopeRef:r}of v.traverse(v.getTreeNode(t)))if(r&&E(e,r.current))return!0;return!1}function ee(e){return L(e,f)}function F(e,t){var r;let o=(r=v.getTreeNode(t))===null||r===void 0?void 0:r.parent;for(;o;){if(o.scopeRef===e)return!0;o=o.parent}return!1}function T(e,t=!1){if(e!=null&&!t)try{D(e)}catch{}else if(e!=null)try{e.focus()}catch{}}function C(e,t=!0){let r=e[0].previousElementSibling,o=y(e),n=g(o,{tabbable:t},e);n.currentNode=r;let a=n.nextNode();t&&!a&&(o=y(e),n=g(o,{tabbable:!1},e),n.currentNode=r,a=n.nextNode()),T(a)}function q(e,t){const r=R.useRef(t);m.useEffect(()=>{if(r.current){f=e;const o=h(e.current?e.current[0]:void 0);!E(o.activeElement,f.current)&&e.current&&C(e.current)}r.current=!1},[e])}function H(e,t,r){N(()=>{if(t||r)return;let o=e.current;const n=h(o?o[0]:void 0);let a=l=>{let i=l.target;E(i,e.current)?f=e:k(i)||(f=null)};return n.addEventListener("focusin",a,!1),o==null||o.forEach(l=>l.addEventListener("focusin",a,!1)),()=>{n.removeEventListener("focusin",a,!1),o==null||o.forEach(l=>l.removeEventListener("focusin",a,!1))}},[e,t,r])}function U(e){let t=v.getTreeNode(f);for(;t&&t.scopeRef!==e;){if(t.nodeToRestore)return!1;t=t.parent}return(t==null?void 0:t.scopeRef)===e}function J(e,t,r){const o=m.useRef(typeof document<"u"?h(e.current?e.current[0]:void 0).activeElement:null);N(()=>{let n=e.current;const a=h(n?n[0]:void 0);if(!t||r)return;let l=()=>{(!f||F(f,e))&&E(a.activeElement,e.current)&&(f=e)};return a.addEventListener("focusin",l,!1),n==null||n.forEach(i=>i.addEventListener("focusin",l,!1)),()=>{a.removeEventListener("focusin",l,!1),n==null||n.forEach(i=>i.removeEventListener("focusin",l,!1))}},[e,r]),N(()=>{const n=h(e.current?e.current[0]:void 0);if(!t)return;let a=l=>{if(l.key!=="Tab"||l.altKey||l.ctrlKey||l.metaKey||!S(e)||l.isComposing)return;let i=n.activeElement;if(!E(i,e.current))return;let p=v.getTreeNode(e);if(!p)return;let u=p.nodeToRestore,s=g(n.body,{tabbable:!0});s.currentNode=i;let c=l.shiftKey?s.previousNode():s.nextNode();if((!u||!n.body.contains(u)||u===n.body)&&(u=void 0,p.nodeToRestore=void 0),(!c||!E(c,e.current))&&u){s.currentNode=u;do c=l.shiftKey?s.previousNode():s.nextNode();while(E(c,e.current));l.preventDefault(),l.stopPropagation(),c?T(c,!0):k(u)?T(u,!0):i.blur()}};return r||n.addEventListener("keydown",a,!0),()=>{r||n.removeEventListener("keydown",a,!0)}},[e,t,r]),N(()=>{const n=h(e.current?e.current[0]:void 0);if(!t)return;let a=v.getTreeNode(e);if(a){var l;return a.nodeToRestore=(l=o.current)!==null&&l!==void 0?l:void 0,()=>{let i=v.getTreeNode(e);if(!i)return;let p=i.nodeToRestore;if(t&&p&&(E(n.activeElement,e.current)||n.activeElement===n.body&&U(e))){let u=v.clone();requestAnimationFrame(()=>{if(n.activeElement===n.body){let s=u.getTreeNode(e);for(;s;){if(s.nodeToRestore&&s.nodeToRestore.isConnected){T(s.nodeToRestore);return}s=s.parent}for(s=u.getTreeNode(e);s;){if(s.scopeRef&&s.scopeRef.current&&v.getTreeNode(s.scopeRef)){C(s.scopeRef.current,!0);return}s=s.parent}}})}}}},[e,t])}function g(e,t,r){let o=t!=null&&t.tabbable?W:P,n=h(e).createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode(a){var l;return!(t==null||(l=t.from)===null||l===void 0)&&l.contains(a)?NodeFilter.FILTER_REJECT:a.matches(o)&&O(a)&&(!r||E(a,r))&&(!(t!=null&&t.accept)||t.accept(a))?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});return t!=null&&t.from&&(n.currentNode=t.from),n}class I{get size(){return this.fastMap.size}getTreeNode(t){return this.fastMap.get(t)}addTreeNode(t,r,o){let n=this.fastMap.get(r??null);if(!n)return;let a=new _({scopeRef:t});n.addChild(a),a.parent=n,this.fastMap.set(t,a),o&&(a.nodeToRestore=o)}addNode(t){this.fastMap.set(t.scopeRef,t)}removeTreeNode(t){if(t===null)return;let r=this.fastMap.get(t);if(!r)return;let o=r.parent;for(let a of this.traverse())a!==r&&r.nodeToRestore&&a.nodeToRestore&&r.scopeRef&&r.scopeRef.current&&E(a.nodeToRestore,r.scopeRef.current)&&(a.nodeToRestore=r.nodeToRestore);let n=r.children;o&&(o.removeChild(r),n.size>0&&n.forEach(a=>o&&o.addChild(a))),this.fastMap.delete(r.scopeRef)}*traverse(t=this.root){if(t.scopeRef!=null&&(yield t),t.children.size>0)for(let r of t.children)yield*this.traverse(r)}clone(){var t;let r=new I;var o;for(let n of this.traverse())r.addTreeNode(n.scopeRef,(o=(t=n.parent)===null||t===void 0?void 0:t.scopeRef)!==null&&o!==void 0?o:null,n.nodeToRestore);return r}constructor(){this.fastMap=new Map,this.root=new _({scopeRef:null}),this.fastMap.set(null,this.root)}}class _{addChild(t){this.children.add(t),t.parent=this}removeChild(t){this.children.delete(t),t.parent=void 0}constructor(t){this.children=new Set,this.contain=!1,this.scopeRef=t.scopeRef}}let v=new I;var x={ease:[.36,.66,.4,1],easeIn:[.4,0,1,1],easeOut:[0,0,.2,1],easeInOut:[.4,0,.2,1],spring:[.155,1.105,.295,1.12],springOut:[.57,-.15,.62,.07],softSpring:[.16,1.11,.3,1.02]},te={scaleSpring:{enter:{transform:"scale(1)",opacity:1,transition:{type:"spring",bounce:0,duration:.2}},exit:{transform:"scale(0.85)",opacity:0,transition:{type:"easeOut",duration:.15}}},scaleSpringOpacity:{initial:{opacity:0,transform:"scale(0.8)"},enter:{opacity:1,transform:"scale(1)",transition:{type:"spring",bounce:0,duration:.3}},exit:{opacity:0,transform:"scale(0.96)",transition:{type:"easeOut",bounce:0,duration:.15}}},scale:{enter:{scale:1},exit:{scale:.95}},scaleFadeIn:{enter:{transform:"scale(1)",opacity:1,transition:{duration:.25,ease:x.easeIn}},exit:{transform:"scale(0.95)",opacity:0,transition:{duration:.2,ease:x.easeOut}}},scaleInOut:{enter:{transform:"scale(1)",opacity:1,transition:{duration:.4,ease:x.ease}},exit:{transform:"scale(1.03)",opacity:0,transition:{duration:.3,ease:x.ease}}},fade:{enter:{opacity:1,transition:{duration:.4,ease:x.ease}},exit:{opacity:0,transition:{duration:.3,ease:x.ease}}},collapse:{enter:{opacity:1,height:"auto",transition:{height:{type:"spring",bounce:0,duration:.3},opacity:{easings:"ease",duration:.4}}},exit:{opacity:0,height:0,transition:{easings:"ease",duration:.3}}}};export{X as $,x as T,Q as a,g as b,te as c,Z as d,ee as e};
