import{r as d,R as A,f as ue,j as n,$ as R,b as D,P as de,k as _,aX as pe,aY as me}from"./index-Dil6rDqS.js";import{u as he}from"./chunk-MSLIMGMJ-DHZn4Z4u.js";import{C as fe}from"./chunk-SLABUSGS-DVdD4D43.js";import{a as ge,b as xe}from"./chunk-HAJUSXOG-B4LwMTBm.js";import{t as ve}from"./chunk-6LIX6LVT-B-cRgo5c.js";import{i as be}from"./chunk-MLPFQTYO-DnoO9Gkx.js";import"./index-BQc6nlx-.js";import"./useControlledState-Cs0lxDQw.js";import"./useLabel-BW8nUhyU.js";import"./useFocusable-Db5-b0Ky.js";import"./useButton-BOfnDlQY.js";import"./chunk-736YWA4T-sA4_uwoq.js";import"./index-Cj3nFnmk.js";function N(){return N=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},N.apply(null,arguments)}function Se(e,t){if(e==null)return{};var a={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;a[r]=e[r]}return a}var Ce=d.useLayoutEffect,we=function(t){var a=A.useRef(t);return Ce(function(){a.current=t}),a},$=function(t,a){if(typeof t=="function"){t(a);return}t.current=a},Be=function(t,a){var r=A.useRef();return A.useCallback(function(i){t.current=i,r.current&&$(r.current,null),r.current=a,a&&$(a,i)},[a])},V={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0",display:"block"},Fe=function(t){Object.keys(V).forEach(function(a){t.style.setProperty(a,V[a],"important")})},G=Fe,p=null,J=function(t,a){var r=t.scrollHeight;return a.sizingStyle.boxSizing==="border-box"?r+a.borderSize:r-a.paddingSize};function je(e,t,a,r){a===void 0&&(a=1),r===void 0&&(r=1/0),p||(p=document.createElement("textarea"),p.setAttribute("tabindex","-1"),p.setAttribute("aria-hidden","true"),G(p)),p.parentNode===null&&document.body.appendChild(p);var i=e.paddingSize,u=e.borderSize,l=e.sizingStyle,m=l.boxSizing;Object.keys(l).forEach(function(h){var v=h;p.style[v]=l[v]}),G(p),p.value=t;var o=J(p,e);p.value=t,o=J(p,e),p.value="x";var c=p.scrollHeight-i,s=c*a;m==="border-box"&&(s=s+i+u),o=Math.max(s,o);var g=c*r;return m==="border-box"&&(g=g+i+u),o=Math.min(g,o),[o,c]}var q=function(){},Te=function(t,a){return t.reduce(function(r,i){return r[i]=a[i],r},{})},ke=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak","wordSpacing","scrollbarGutter"],ye=!!document.documentElement.currentStyle,ze=function(t){var a=window.getComputedStyle(t);if(a===null)return null;var r=Te(ke,a),i=r.boxSizing;if(i==="")return null;ye&&i==="border-box"&&(r.width=parseFloat(r.width)+parseFloat(r.borderRightWidth)+parseFloat(r.borderLeftWidth)+parseFloat(r.paddingRight)+parseFloat(r.paddingLeft)+"px");var u=parseFloat(r.paddingBottom)+parseFloat(r.paddingTop),l=parseFloat(r.borderBottomWidth)+parseFloat(r.borderTopWidth);return{sizingStyle:r,paddingSize:u,borderSize:l}},Pe=ze;function I(e,t,a){var r=we(a);d.useLayoutEffect(function(){var i=function(l){return r.current(l)};if(e)return e.addEventListener(t,i),function(){return e.removeEventListener(t,i)}},[])}var Le=function(t,a){I(document.body,"reset",function(r){t.current.form===r.target&&a(r)})},Ae=function(t){I(window,"resize",t)},Ne=function(t){I(document.fonts,"loadingdone",t)},Ie=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],Ee=function(t,a){var r=t.cacheMeasurements,i=t.maxRows,u=t.minRows,l=t.onChange,m=l===void 0?q:l,o=t.onHeightChange,c=o===void 0?q:o,s=Se(t,Ie),g=s.value!==void 0,h=d.useRef(null),v=Be(h,a),j=d.useRef(0),C=d.useRef(),x=function(){var f=h.current,B=r&&C.current?C.current:Pe(f);if(B){C.current=B;var b=je(B,f.value||f.placeholder||"x",u,i),S=b[0],k=b[1];j.current!==S&&(j.current=S,f.style.setProperty("height",S+"px","important"),c(S,{rowHeight:k}))}},T=function(f){g||x(),m(f)};return d.useLayoutEffect(x),Le(h,function(){if(!g){var w=h.current.value;requestAnimationFrame(function(){var f=h.current;f&&w!==f.value&&x()})}}),Ae(x),Ne(x),d.createElement("textarea",N({},s,{onChange:T,ref:v}))},He=d.forwardRef(Ee),Y=ue(({style:e,minRows:t=3,maxRows:a=8,cacheMeasurements:r=!1,disableAutosize:i=!1,onHeightChange:u,...l},m)=>{const{Component:o,label:c,description:s,startContent:g,endContent:h,hasHelper:v,shouldLabelBeOutside:j,shouldLabelBeInside:C,isInvalid:x,errorMessage:T,getBaseProps:w,getLabelProps:f,getInputProps:B,getInnerWrapperProps:b,getInputWrapperProps:S,getHelperWrapperProps:k,getDescriptionProps:K,getErrorMessageProps:ee,isClearable:E,getClearButtonProps:H}=he({...l,ref:m,isMultiline:!0}),[te,re]=d.useState(t>1),[ae,ne]=d.useState(!1),M=c?n.jsx("label",{...f(),children:c}):null,F=B(),ie=(y,z)=>{if(t===1&&re(y>=z.rowHeight*2),a>t){const ce=y>=a*z.rowHeight;ne(ce)}u==null||u(y,z)},O=i?n.jsx("textarea",{...F,style:R(F.style,e??{})}):n.jsx(He,{...F,cacheMeasurements:r,"data-hide-scroll":D(!ae),maxRows:a,minRows:t,style:R(F.style,e??{}),onHeightChange:ie}),se=d.useMemo(()=>E?n.jsx("button",{...H(),children:n.jsx(fe,{})}):null,[E,H]),oe=d.useMemo(()=>g||h?n.jsxs("div",{...b(),children:[g,O,h]}):n.jsx("div",{...b(),children:O}),[g,F,h,b]),W=x&&T,le=W||s;return n.jsxs(o,{...w(),children:[j?M:null,n.jsxs("div",{...S(),"data-has-multiple-rows":D(te),children:[C?M:null,oe,se]}),v&&le?n.jsx("div",{...k(),children:W?n.jsx("div",{...ee(),children:T}):n.jsx("div",{...K(),children:s})}):null]})});Y.displayName="HeroUI.Textarea";var X=Y;const Me="/assets/ClanshipBarrage-uSWhHstu.webp",Oe="/assets/CosmicBarb-dbxeuGs7.webp",We="/assets/Fragmentize-BblF7X_u.webp",Re="/assets/FusionBomb-D_y1UEeV.webp",De="/assets/RavenousSwarm-Bp9ZQal2.webp",_e="/assets/SoulFire-B41XdsvR.webp";var Q=(e=>(e.MoonBeam="MoonBeam",e.Fragmentize="Fragmentize",e.SkullBash="SkullBash",e.RazorWind="RazorWind",e.WhipOfLightning="WhipOfLightning",e.BurstCount="BurstCount",e.Purify="Purify",e.LimbBurst="LimbBurst",e.FlakShot="FlakShot",e.Haymaker="Haymaker",e.ChainLightning="ChainLightning",e.MirrorForce="MirrorForce",e.CelestialStatic="CelestialStatic",e.BurningAttack="BurningAttack",e.PoisonAttack="PoisonAttack",e.DecayingAttack="DecayingAttack",e.Fuse="Fuse",e.Shadow="Shadow",e.PlagueAttack="PlagueAttack",e.Disease="Disease",e.Swarm="Swarm",e.RuinousRust="RuinousRust",e.PowerBubble="PowerBubble",e.RuneAttack="RuneAttack",e.MagicPotion="MagicPotion",e.ExecutionersAxe="ExecutionersAxe",e.CrushingVoid="CrushingVoid",e.MentalFocus="MentalFocus",e.ImpactAttack="ImpactAttack",e.InnerTruth="InnerTruth",e.FinisherAttack="FinisherAttack",e.SuperheatMetal="SuperheatMetal",e.BurstBoost="BurstBoost",e.LimbSupport="LimbSupport",e.TotemFairySkill="TotemFairySkill",e.TeamTactics="TeamTactics",e.SpinalTap="SpinalTap",e.AstralEcho="AstralEcho",e.TriangleSupport="TriangleSupport",e.Weaken="Weaken",e.SandsOfTime="SandsOfTime",e.CosmicBarb="CosmicBarb",e))(Q||{});const $e={MoonBeam:"Moon Beam",Fragmentize:"Fragmentize",SkullBash:"Skull Bash",RazorWind:"Razor Wind",WhipOfLightning:"Whip of Lightning",BurstCount:"Clanship Barrage",Purify:"Purifying Blast",LimbBurst:"Psychic Shackles",FlakShot:"Flak Shot",Haymaker:"Cosmic Haymaker",ChainLightning:"Chain of Vengeance",MirrorForce:"Mirror Force",CelestialStatic:"Celestial Static",BurningAttack:"Blazing Inferno",PoisonAttack:"Acid Drench",DecayingAttack:"Decaying Strike",Fuse:"Fusion Bomb",Shadow:"Grim Shadow",PlagueAttack:"Thriving Plague",Disease:"Radioactivity",Swarm:"Ravenous Swarm",RuinousRust:"Ruinous Rain",PowerBubble:"Corrosive Bubbles",RuneAttack:"Maelstrom",MagicPotion:"Amplify",ExecutionersAxe:"Crushing Instinct",CrushingVoid:"Insanity Void",MentalFocus:"Rancid Gas",ImpactAttack:"Inspiring Force",InnerTruth:"Soul Fire",FinisherAttack:"Victory March",SuperheatMetal:"Prismatic Rift",BurstBoost:"Ancestral Favor",LimbSupport:"Grasping Vines",TotemFairySkill:"Totem of Power",TeamTactics:"Team Tactics",SpinalTap:"Skeletal Smash",AstralEcho:"Astral Echo",TriangleSupport:"Radiant Kaleidoscope",Weaken:"Guard Break",SandsOfTime:"Sands of Time",CosmicBarb:"Electro Zap"},P={Fuse:15,Swarm:15,InnerTruth:15},L={BurstCount:15,Fragmentize:15,CosmicBarb:20},Ve=(e,t)=>{const a="raidCards",r="equipmentSets";try{const i=JSON.parse(e);if(!i||typeof i!="object")return"";if(Object.prototype.hasOwnProperty.call(i,a)){const l=i[a];if(typeof l!="object"||l==null)return"";for(const m of Object.values(Q)){if(!Object.prototype.hasOwnProperty.call(l,m))continue;const o=l[m];if(!o||typeof o.lv!="number")continue;const c=t[m];if(c===t.Fuse){const s=P.Fuse;s!==void 0&&(o.lv-=s)}if(c===t.Swarm){const s=P.Swarm;s!==void 0&&(o.lv-=s)}if(c===t.InnerTruth){const s=P.InnerTruth;s!==void 0&&(o.lv-=s)}if(c===t.BurstCount){const s=L.BurstCount;s!==void 0&&(o.lv+=s,o.lv=Math.min(o.lv,100))}if(c===t.Fragmentize){const s=L.Fragmentize;s!==void 0&&(o.lv+=s,o.lv=Math.min(o.lv,100))}if(c===t.CosmicBarb){const s=L.CosmicBarb;s!==void 0&&(o.lv+=s,o.lv=Math.min(o.lv,100))}}}const u=i[r];return typeof u!="object"||u==null?"":i}catch{return""}},Z={new:[{name:"Clanship Barrage",level:15,image:Me,isRemoved:!1},{name:"Fragmentize",level:15,image:We,isRemoved:!1},{name:"Electro Zap",level:20,image:Oe,isRemoved:!1}],old:[{name:"Fusion Bomb",level:15,image:Re,isRemoved:!1},{name:"Ravenous Swarm",level:15,image:De,isRemoved:!1},{name:"Soul Fire",level:15,image:_e,isRemoved:!1}]};function U({title:e,data:t,isNewSeason:a}){return n.jsxs("div",{className:"flex flex-col gap-2 text-sm",children:[n.jsx("p",{children:e}),n.jsx("ul",{className:"grid columns-1 gap-0.5",children:t.map(({name:r,level:i,image:u,isRemoved:l})=>n.jsx("li",{children:n.jsxs("div",{className:"flex shrink-0 flex-row items-center gap-4",children:[n.jsx(be,{src:u,alt:`${r} raid card`,className:"h-8 w-8 object-cover",radius:"none"}),a?"+":"-",i,l&&n.jsx("span",{className:"text-xs",children:"(Removed from player export)"})]})},r))})]})}function nt(){const[e,t]=d.useState(""),[a,r]=d.useState(""),[i,u]=d.useState(!1),l=d.useMemo(()=>c=>{if(!c)return null;try{return JSON.stringify(JSON.parse(c),null,2)}catch{return null}},[]),m=d.useCallback(async()=>{try{await navigator.clipboard.writeText(a),u(!0),setTimeout(()=>{u(!1)},1e3)}catch{return}},[l,e,a]),o=()=>{t(""),r("")};return n.jsx(de,{children:n.jsxs("div",{className:"flex flex-col items-center justify-center gap-8",children:[n.jsxs("div",{className:"flex max-w-md flex-col font-normal",children:[n.jsx("h3",{className:"pb-2 text-base",children:"What is Player Export Editor?"}),n.jsxs("div",{className:"flex max-w-md flex-col gap-2 text-left",children:[n.jsxs("p",{className:"text-sm",children:["This tool provides a temporary fix for making TT2 player export compatible with the",n.jsx("span",{className:"italic",children:" TT2 Raid Optimizer"})," app."]}),n.jsx(ge,{className:"px-0",children:n.jsx(xe,{"aria-label":"Show card changes",title:"Show card changes",classNames:{title:["text-sm"]},children:n.jsxs("div",{className:"flex max-w-md flex-col gap-4",children:[n.jsx(U,{title:"Changes to card levels in the raid app",data:Z.old,isNewSeason:!1}),n.jsx(U,{title:"Current seasonal card buffs",data:Z.new,isNewSeason:!0})]})},"1")})]})]}),n.jsxs("div",{className:"flex w-full max-w-md flex-col items-center justify-center gap-8 sm:flex-row sm:items-start",children:[n.jsxs("div",{className:"flex flex-col items-center justify-center gap-4",children:[n.jsx(X,{label:"Player Export",labelPlacement:"outside",placeholder:"Paste here",className:"max-w-xs",classNames:{label:["text-left"]},value:e,onValueChange:c=>{const s=l(c);t(c),r(typeof s=="string"?JSON.stringify(Ve(s,$e)):"")},errorMessage:"Invalid JSON data","aria-errormessage":"Invalid JSON data",isInvalid:e.length>0&&l(e)==null,size:"lg"}),n.jsx(_,{isDisabled:!e.length,color:"default","aria-label":"Clear player export text",onPress:o,className:`w-fit self-center ${e.length?"inline-flex":"hidden"}`,startContent:n.jsx(pe,{}),children:"Clear"})]}),n.jsxs("div",{className:"flex flex-col items-center justify-center gap-4",children:[n.jsx(X,{label:"Fixed Player Export",labelPlacement:"outside",placeholder:"Copy to TT2 Raid Optimizer app",className:"max-w-xs",classNames:{label:["text-left"]},value:a,onValueChange:r,isReadOnly:!0,errorMessage:"Something went wrong...",size:"lg"}),n.jsx(ve,{"aria-label":"Copied to clipboard tooltip",isDisabled:!l(e),isOpen:i,content:"Copied",showArrow:!0,placement:"right",children:n.jsx(_,{isDisabled:!l(e),color:"primary","aria-label":"Copy player export",onPress:m,className:"w-fit self-center",startContent:n.jsx(me,{}),children:"Copy"})})]})]})]})})}export{nt as default};
