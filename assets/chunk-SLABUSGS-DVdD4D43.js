import{r as n,t as _,j as y,R as D,V as k,$ as N}from"./index-Dil6rDqS.js";import{a as q}from"./useControlledState-Cs0lxDQw.js";var ne=(...t)=>{let e=" ";for(const a of t)if(typeof a=="string"&&a.length>0){e=a;break}return e};function z(t){const e=n.useRef(null);return n.useMemo(()=>({get current(){return e.current},set current(a){e.current=a,typeof t=="function"?t(a):t&&(t.current=a)}}),[t])}var Q=_({base:"flex flex-col gap-2 items-start"}),oe=t=>y.jsx("svg",{"aria-hidden":"true",focusable:"false",height:"1em",role:"presentation",viewBox:"0 0 24 24",width:"1em",...t,children:y.jsx("path",{d:"M12 2a10 10 0 1010 10A10.016 10.016 0 0012 2zm3.36 12.3a.754.754 0 010 1.06.748.748 0 01-1.06 0l-2.3-2.3-2.3 2.3a.748.748 0 01-1.06 0 .754.754 0 010-1.06l2.3-2.3-2.3-2.3A.75.75 0 019.7 8.64l2.3 2.3 2.3-2.3a.75.75 0 011.06 1.06l-2.3 2.3z",fill:"currentColor"})});const F={badInput:!1,customError:!1,patternMismatch:!1,rangeOverflow:!1,rangeUnderflow:!1,stepMismatch:!1,tooLong:!1,tooShort:!1,typeMismatch:!1,valueMissing:!1,valid:!0},O={...F,customError:!0,valid:!1},$={isInvalid:!1,validationDetails:F,validationErrors:[]},K=n.createContext({}),L="__formValidationState"+Date.now();function se(t){if(t[L]){let{realtimeValidation:e,displayValidation:a,updateValidation:r,resetValidation:o,commitValidation:l}=t[L];return{realtimeValidation:e,displayValidation:a,updateValidation:r,resetValidation:o,commitValidation:l}}return Y(t)}function Y(t){let{isInvalid:e,validationState:a,name:r,value:o,builtinValidation:l,validate:v,validationBehavior:u="aria"}=t;a&&(e||(e=a==="invalid"));let c=e!==void 0?{isInvalid:e,validationErrors:[],validationDetails:O}:null,s=n.useMemo(()=>{if(!v||o==null)return null;let d=G(v,o);return A(d)},[v,o]);l!=null&&l.validationDetails.valid&&(l=void 0);let i=n.useContext(K),f=n.useMemo(()=>r?Array.isArray(r)?r.flatMap(d=>S(i[d])):S(i[r]):[],[i,r]),[m,P]=n.useState(i),[C,V]=n.useState(!1);i!==m&&(P(i),V(!1));let E=n.useMemo(()=>A(C?[]:f),[C,f]),w=n.useRef($),[x,g]=n.useState($),b=n.useRef($),T=()=>{if(!U)return;h(!1);let d=s||l||w.current;p(d,b.current)||(b.current=d,g(d))},[U,h]=n.useState(!1);return n.useEffect(T),{realtimeValidation:c||E||s||l||$,displayValidation:u==="native"?c||E||x:c||E||s||l||x,updateValidation(d){u==="aria"&&!p(x,d)?g(d):w.current=d},resetValidation(){let d=$;p(d,b.current)||(b.current=d,g(d)),u==="native"&&h(!1),V(!0)},commitValidation(){u==="native"&&h(!0),V(!0)}}}function S(t){return t?Array.isArray(t)?t:[t]:[]}function G(t,e){if(typeof t=="function"){let a=t(e);if(a&&typeof a!="boolean")return S(a)}return[]}function A(t){return t.length?{isInvalid:!0,validationErrors:t,validationDetails:O}:null}function p(t,e){return t===e?!0:!!t&&!!e&&t.isInvalid===e.isInvalid&&t.validationErrors.length===e.validationErrors.length&&t.validationErrors.every((a,r)=>a===e.validationErrors[r])&&Object.entries(t.validationDetails).every(([a,r])=>e.validationDetails[a]===r)}const B=typeof document<"u"?D.useLayoutEffect:()=>{};var I;const H=(I=D.useInsertionEffect)!==null&&I!==void 0?I:B;function M(t){const e=n.useRef(null);return H(()=>{e.current=t},[t]),n.useCallback((...a)=>{const r=e.current;return r==null?void 0:r(...a)},[])}function de(t,e,a){let{validationBehavior:r,focus:o}=t;B(()=>{if(r==="native"&&(a!=null&&a.current)&&!a.current.disabled){let s=e.realtimeValidation.isInvalid?e.realtimeValidation.validationErrors.join(" ")||"Invalid value.":"";a.current.setCustomValidity(s),a.current.hasAttribute("title")||(a.current.title=""),e.realtimeValidation.isInvalid||e.updateValidation(W(a.current))}});let l=n.useRef(!1),v=M(()=>{l.current||e.resetValidation()}),u=M(s=>{var i;e.displayValidation.isInvalid||e.commitValidation();let f=a==null||(i=a.current)===null||i===void 0?void 0:i.form;if(!s.defaultPrevented&&a&&f&&X(f)===a.current){var m;o?o():(m=a.current)===null||m===void 0||m.focus(),k("keyboard")}s.preventDefault()}),c=M(()=>{e.commitValidation()});n.useEffect(()=>{let s=a==null?void 0:a.current;if(!s)return;let i=s.form,f=i==null?void 0:i.reset;return i&&(i.reset=()=>{l.current=!window.event||window.event.type==="message"&&window.event.target instanceof MessagePort,f==null||f.call(i),l.current=!1}),s.addEventListener("invalid",u),s.addEventListener("change",c),i==null||i.addEventListener("reset",v),()=>{s.removeEventListener("invalid",u),s.removeEventListener("change",c),i==null||i.removeEventListener("reset",v),i&&(i.reset=f)}},[a,u,c,v,r])}function J(t){let e=t.validity;return{badInput:e.badInput,customError:e.customError,patternMismatch:e.patternMismatch,rangeOverflow:e.rangeOverflow,rangeUnderflow:e.rangeUnderflow,stepMismatch:e.stepMismatch,tooLong:e.tooLong,tooShort:e.tooShort,typeMismatch:e.typeMismatch,valueMissing:e.valueMissing,valid:e.valid}}function W(t){return{isInvalid:!t.validity.valid,validationDetails:J(t),validationErrors:t.validationMessage?[t.validationMessage]:[]}}function X(t){for(let e=0;e<t.elements.length;e++){let a=t.elements[e];if(!a.validity.valid)return a}return null}var j=Symbol("default");function Z(t,e){let a=n.useContext(t);if(e===null)return null;if(a&&typeof a=="object"&&"slots"in a&&a.slots){let r=new Intl.ListFormat().format(Object.keys(a.slots).map(l=>`"${l}"`));if(!e&&!a.slots[j])throw new Error(`A slot prop is required. Valid slot names are ${r}.`);let o=e||j;if(!a.slots[o])throw new Error(`Invalid slot "${e}". Valid slot names are ${r}.`);return a.slots[o]}return a}function ee(t,e,a){let r=Z(a,t.slot)||{},{ref:o,...l}=r,v=z(n.useMemo(()=>q(e,o),[e,o])),u=N(l,t);return"style"in l&&l.style&&"style"in t&&t.style&&(typeof l.style=="function"||typeof t.style=="function"?u.style=c=>{let s=typeof l.style=="function"?l.style(c):l.style,i={...c.defaultStyle,...s},f=typeof t.style=="function"?t.style({...c,defaultStyle:i}):t.style;return{...i,...f}}:u.style={...l.style,...t.style}),[u,v]}const te=n.createContext({});var R=n.createContext(null);n.forwardRef(function(e,a){[e,a]=ee(e,a,R);let{validationErrors:r,validationBehavior:o="native",children:l,className:v,...u}=e;const c=n.useMemo(()=>Q({className:v}),[v]);return y.jsx("form",{noValidate:o!=="native",...u,ref:a,className:c,children:y.jsx(R.Provider,{value:{...e,validationBehavior:o},children:y.jsx(te.Provider,{value:r??{},children:l})})})});export{se as $,oe as C,R as F,de as a,L as b,$ as c,ne as s,Z as u};
