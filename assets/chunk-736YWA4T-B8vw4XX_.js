import{bh as H,bi as D,r as p,ax as _,am as T,bc as g,aD as $,bj as R,av as U,bk as q,bl as J,bm as j,as as G,be as B}from"./index-CENqs8IR.js";class X{get currentNode(){return this._currentNode}set currentNode(e){if(!D(this.root,e))throw new Error("Cannot set currentNode to a node that is not contained by the root node.");const t=[];let n=e,o=e;for(this._currentNode=e;n&&n!==this.root;)if(n.nodeType===Node.DOCUMENT_FRAGMENT_NODE){const l=n,a=this._doc.createTreeWalker(l,this.whatToShow,{acceptNode:this._acceptNode});t.push(a),a.currentNode=o,this._currentSetFor.add(a),n=o=l.host}else n=n.parentNode;const i=this._doc.createTreeWalker(this.root,this.whatToShow,{acceptNode:this._acceptNode});t.push(i),i.currentNode=o,this._currentSetFor.add(i),this._walkerStack=t}get doc(){return this._doc}firstChild(){let e=this.currentNode,t=this.nextNode();return D(e,t)?(t&&(this.currentNode=t),t):(this.currentNode=e,null)}lastChild(){let t=this._walkerStack[0].lastChild();return t&&(this.currentNode=t),t}nextNode(){const e=this._walkerStack[0].nextNode();if(e){if(e.shadowRoot){var t;let o;if(typeof this.filter=="function"?o=this.filter(e):!((t=this.filter)===null||t===void 0)&&t.acceptNode&&(o=this.filter.acceptNode(e)),o===NodeFilter.FILTER_ACCEPT)return this.currentNode=e,e;let i=this.nextNode();return i&&(this.currentNode=i),i}return e&&(this.currentNode=e),e}else if(this._walkerStack.length>1){this._walkerStack.shift();let n=this.nextNode();return n&&(this.currentNode=n),n}else return null}previousNode(){const e=this._walkerStack[0];if(e.currentNode===e.root){if(this._currentSetFor.has(e))if(this._currentSetFor.delete(e),this._walkerStack.length>1){this._walkerStack.shift();let o=this.previousNode();return o&&(this.currentNode=o),o}else return null;return null}const t=e.previousNode();if(t){if(t.shadowRoot){var n;let i;if(typeof this.filter=="function"?i=this.filter(t):!((n=this.filter)===null||n===void 0)&&n.acceptNode&&(i=this.filter.acceptNode(t)),i===NodeFilter.FILTER_ACCEPT)return t&&(this.currentNode=t),t;let l=this.lastChild();return l&&(this.currentNode=l),l}return t&&(this.currentNode=t),t}else if(this._walkerStack.length>1){this._walkerStack.shift();let o=this.previousNode();return o&&(this.currentNode=o),o}else return null}nextSibling(){return null}previousSibling(){return null}parentNode(){return null}constructor(e,t,n,o){this._walkerStack=[],this._currentSetFor=new Set,this._acceptNode=l=>{if(l.nodeType===Node.ELEMENT_NODE){const f=l.shadowRoot;if(f){const u=this._doc.createTreeWalker(f,this.whatToShow,{acceptNode:this._acceptNode});return this._walkerStack.unshift(u),NodeFilter.FILTER_ACCEPT}else{var a;if(typeof this.filter=="function")return this.filter(l);if(!((a=this.filter)===null||a===void 0)&&a.acceptNode)return this.filter.acceptNode(l);if(this.filter===null)return NodeFilter.FILTER_ACCEPT}}return NodeFilter.FILTER_SKIP},this._doc=e,this.root=t,this.filter=o??null,this.whatToShow=n??NodeFilter.SHOW_ALL,this._currentNode=t,this._walkerStack.unshift(e.createTreeWalker(t,n,this._acceptNode));const i=t.shadowRoot;if(i){const l=this._doc.createTreeWalker(i,this.whatToShow,{acceptNode:this._acceptNode});this._walkerStack.unshift(l)}}}function Y(r,e,t,n){return H()?new X(r,e,t,n):r.createTreeWalker(e,t,n)}function ie(r,e){if(!r)return!1;let t=window.getComputedStyle(r),n=/(auto|scroll)/.test(t.overflow+t.overflowX+t.overflowY);return n&&e&&(n=r.scrollHeight!==r.clientHeight||r.scrollWidth!==r.clientWidth),n}function ae(r,e,t){let[n,o]=p.useState(r||e),i=p.useRef(r!==void 0),l=r!==void 0;p.useEffect(()=>{i.current,i.current=l},[l]);let a=l?r:n,f=p.useCallback((u,...h)=>{let c=(s,...d)=>{t&&(Object.is(a,s)||t(s,...d)),l||(a=s)};typeof u=="function"?o((d,...N)=>{let w=u(l?a:d,...N);return c(w,...h),l?d:w}):(l||o(u),c(u,...h))},[l,a,t]);return[a,f]}const K=_.createContext(null),L="react-aria-focus-scope-restore";let v=null;function le(r){let{children:e,contain:t,restoreFocus:n,autoFocus:o}=r,i=p.useRef(null),l=p.useRef(null),a=p.useRef([]),{parentNode:f}=p.useContext(K)||{},u=p.useMemo(()=>new A({scopeRef:a}),[a]);T(()=>{let s=f||b.root;if(b.getTreeNode(s.scopeRef)&&v&&!F(v,s.scopeRef)){let d=b.getTreeNode(v);d&&(s=d)}s.addChild(u),b.addNode(u)},[u,f]),T(()=>{let s=b.getTreeNode(a);s&&(s.contain=!!t)},[t]),T(()=>{var s;let d=(s=i.current)===null||s===void 0?void 0:s.nextSibling,N=[],w=C=>C.stopPropagation();for(;d&&d!==l.current;)N.push(d),d.addEventListener(L,w),d=d.nextSibling;return a.current=N,()=>{for(let C of N)C.removeEventListener(L,w)}},[e]),re(a,n,t),ee(a,t),ne(a,n,t),te(a,o),p.useEffect(()=>{const s=g($(a.current?a.current[0]:void 0));let d=null;if(E(s,a.current)){for(let N of b.traverse())N.scopeRef&&E(s,N.scopeRef.current)&&(d=N);d===b.getTreeNode(a)&&(v=d.scopeRef)}},[a]),T(()=>()=>{var s,d,N;let w=(N=(d=b.getTreeNode(a))===null||d===void 0||(s=d.parent)===null||s===void 0?void 0:s.scopeRef)!==null&&N!==void 0?N:null;(a===v||F(a,v))&&(!w||b.getTreeNode(w))&&(v=w),b.removeTreeNode(a)},[a]);let h=p.useMemo(()=>Q(a),[]),c=p.useMemo(()=>({focusManager:h,parentNode:u}),[u,h]);return _.createElement(K.Provider,{value:c},_.createElement("span",{"data-focus-scope-start":!0,hidden:!0,ref:i}),e,_.createElement("span",{"data-focus-scope-end":!0,hidden:!0,ref:l}))}function Q(r){return{focusNext(e={}){let t=r.current,{from:n,tabbable:o,wrap:i,accept:l}=e;var a;let f=n||g($((a=t[0])!==null&&a!==void 0?a:void 0)),u=t[0].previousElementSibling,h=y(t),c=k(h,{tabbable:o,accept:l},t);c.currentNode=E(f,t)?f:u;let s=c.nextNode();return!s&&i&&(c.currentNode=u,s=c.nextNode()),s&&m(s,!0),s},focusPrevious(e={}){let t=r.current,{from:n,tabbable:o,wrap:i,accept:l}=e;var a;let f=n||g($((a=t[0])!==null&&a!==void 0?a:void 0)),u=t[t.length-1].nextElementSibling,h=y(t),c=k(h,{tabbable:o,accept:l},t);c.currentNode=E(f,t)?f:u;let s=c.previousNode();return!s&&i&&(c.currentNode=u,s=c.previousNode()),s&&m(s,!0),s},focusFirst(e={}){let t=r.current,{tabbable:n,accept:o}=e,i=y(t),l=k(i,{tabbable:n,accept:o},t);l.currentNode=t[0].previousElementSibling;let a=l.nextNode();return a&&m(a,!0),a},focusLast(e={}){let t=r.current,{tabbable:n,accept:o}=e,i=y(t),l=k(i,{tabbable:n,accept:o},t);l.currentNode=t[t.length-1].nextElementSibling;let a=l.previousNode();return a&&m(a,!0),a}}}function y(r){return r[0].parentElement}function x(r){let e=b.getTreeNode(v);for(;e&&e.scopeRef!==r;){if(e.contain)return!1;e=e.parent}return!0}function Z(r){if(r.checked)return!0;let e=[];if(!r.form)e=[...$(r).querySelectorAll(`input[type="radio"][name="${CSS.escape(r.name)}"]`)].filter(i=>!i.form);else{var t,n;let i=(n=r.form)===null||n===void 0||(t=n.elements)===null||t===void 0?void 0:t.namedItem(r.name);e=[...i??[]]}return e?!e.some(i=>i.checked):!1}function ee(r,e){let t=p.useRef(void 0),n=p.useRef(void 0);T(()=>{let o=r.current;if(!e){n.current&&(cancelAnimationFrame(n.current),n.current=void 0);return}const i=$(o?o[0]:void 0);let l=u=>{if(u.key!=="Tab"||u.altKey||u.ctrlKey||u.metaKey||!x(r)||u.isComposing)return;let h=g(i),c=r.current;if(!c||!E(h,c))return;let s=y(c),d=k(s,{tabbable:!0},c);if(!h)return;d.currentNode=h;let N=u.shiftKey?d.previousNode():d.nextNode();N||(d.currentNode=u.shiftKey?c[c.length-1].nextElementSibling:c[0].previousElementSibling,N=u.shiftKey?d.previousNode():d.nextNode()),u.preventDefault(),N&&m(N,!0)},a=u=>{(!v||F(v,r))&&E(R(u),r.current)?(v=r,t.current=R(u)):x(r)&&!S(R(u),r)?t.current?t.current.focus():v&&v.current&&I(v.current):x(r)&&(t.current=R(u))},f=u=>{n.current&&cancelAnimationFrame(n.current),n.current=requestAnimationFrame(()=>{let h=B(),c=(h==="virtual"||h===null)&&U()&&q(),s=g(i);if(!c&&s&&x(r)&&!S(s,r)){v=r;let N=R(u);if(N&&N.isConnected){var d;t.current=N,(d=t.current)===null||d===void 0||d.focus()}else v.current&&I(v.current)}})};return i.addEventListener("keydown",l,!1),i.addEventListener("focusin",a,!1),o?.forEach(u=>u.addEventListener("focusin",a,!1)),o?.forEach(u=>u.addEventListener("focusout",f,!1)),()=>{i.removeEventListener("keydown",l,!1),i.removeEventListener("focusin",a,!1),o?.forEach(u=>u.removeEventListener("focusin",a,!1)),o?.forEach(u=>u.removeEventListener("focusout",f,!1))}},[r,e]),T(()=>()=>{n.current&&cancelAnimationFrame(n.current)},[n])}function V(r){return S(r)}function E(r,e){return!r||!e?!1:e.some(t=>t.contains(r))}function S(r,e=null){if(r instanceof Element&&r.closest("[data-react-aria-top-layer]"))return!0;for(let{scopeRef:t}of b.traverse(b.getTreeNode(e)))if(t&&E(r,t.current))return!0;return!1}function ue(r){return S(r,v)}function F(r,e){var t;let n=(t=b.getTreeNode(e))===null||t===void 0?void 0:t.parent;for(;n;){if(n.scopeRef===r)return!0;n=n.parent}return!1}function m(r,e=!1){if(r!=null&&!e)try{G(r)}catch{}else if(r!=null)try{r.focus()}catch{}}function z(r,e=!0){let t=r[0].previousElementSibling,n=y(r),o=k(n,{tabbable:e},r);o.currentNode=t;let i=o.nextNode();return e&&!i&&(n=y(r),o=k(n,{tabbable:!1},r),o.currentNode=t,i=o.nextNode()),i}function I(r,e=!0){m(z(r,e))}function te(r,e){const t=_.useRef(e);p.useEffect(()=>{if(t.current){v=r;const n=$(r.current?r.current[0]:void 0);!E(g(n),v.current)&&r.current&&I(r.current)}t.current=!1},[r])}function re(r,e,t){T(()=>{if(e||t)return;let n=r.current;const o=$(n?n[0]:void 0);let i=l=>{let a=R(l);E(a,r.current)?v=r:V(a)||(v=null)};return o.addEventListener("focusin",i,!1),n?.forEach(l=>l.addEventListener("focusin",i,!1)),()=>{o.removeEventListener("focusin",i,!1),n?.forEach(l=>l.removeEventListener("focusin",i,!1))}},[r,e,t])}function O(r){let e=b.getTreeNode(v);for(;e&&e.scopeRef!==r;){if(e.nodeToRestore)return!1;e=e.parent}return e?.scopeRef===r}function ne(r,e,t){const n=p.useRef(typeof document<"u"?g($(r.current?r.current[0]:void 0)):null);T(()=>{let o=r.current;const i=$(o?o[0]:void 0);if(!e||t)return;let l=()=>{(!v||F(v,r))&&E(g(i),r.current)&&(v=r)};return i.addEventListener("focusin",l,!1),o?.forEach(a=>a.addEventListener("focusin",l,!1)),()=>{i.removeEventListener("focusin",l,!1),o?.forEach(a=>a.removeEventListener("focusin",l,!1))}},[r,t]),T(()=>{const o=$(r.current?r.current[0]:void 0);if(!e)return;let i=l=>{if(l.key!=="Tab"||l.altKey||l.ctrlKey||l.metaKey||!x(r)||l.isComposing)return;let a=o.activeElement;if(!S(a,r)||!O(r))return;let f=b.getTreeNode(r);if(!f)return;let u=f.nodeToRestore,h=k(o.body,{tabbable:!0});h.currentNode=a;let c=l.shiftKey?h.previousNode():h.nextNode();if((!u||!u.isConnected||u===o.body)&&(u=void 0,f.nodeToRestore=void 0),(!c||!S(c,r))&&u){h.currentNode=u;do c=l.shiftKey?h.previousNode():h.nextNode();while(S(c,r));l.preventDefault(),l.stopPropagation(),c?m(c,!0):V(u)?m(u,!0):a.blur()}};return t||o.addEventListener("keydown",i,!0),()=>{t||o.removeEventListener("keydown",i,!0)}},[r,e,t]),T(()=>{const o=$(r.current?r.current[0]:void 0);if(!e)return;let i=b.getTreeNode(r);if(i){var l;return i.nodeToRestore=(l=n.current)!==null&&l!==void 0?l:void 0,()=>{let a=b.getTreeNode(r);if(!a)return;let f=a.nodeToRestore,u=g(o);if(e&&f&&(u&&S(u,r)||u===o.body&&O(r))){let h=b.clone();requestAnimationFrame(()=>{if(o.activeElement===o.body){let c=h.getTreeNode(r);for(;c;){if(c.nodeToRestore&&c.nodeToRestore.isConnected){P(c.nodeToRestore);return}c=c.parent}for(c=h.getTreeNode(r);c;){if(c.scopeRef&&c.scopeRef.current&&b.getTreeNode(c.scopeRef)){let s=z(c.scopeRef.current,!0);P(s);return}c=c.parent}}})}}}},[r,e])}function P(r){r.dispatchEvent(new CustomEvent(L,{bubbles:!0,cancelable:!0}))&&m(r)}function k(r,e,t){let n=e?.tabbable?J:j,o=r?.nodeType===Node.ELEMENT_NODE?r:null,i=$(o),l=Y(i,r||i,NodeFilter.SHOW_ELEMENT,{acceptNode(a){var f;return!(e==null||(f=e.from)===null||f===void 0)&&f.contains(a)||e?.tabbable&&a.tagName==="INPUT"&&a.getAttribute("type")==="radio"&&(!Z(a)||l.currentNode.tagName==="INPUT"&&l.currentNode.type==="radio"&&l.currentNode.name===a.name)?NodeFilter.FILTER_REJECT:n(a)&&(!t||E(a,t))&&(!e?.accept||e.accept(a))?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});return e?.from&&(l.currentNode=e.from),l}class M{get size(){return this.fastMap.size}getTreeNode(e){return this.fastMap.get(e)}addTreeNode(e,t,n){let o=this.fastMap.get(t??null);if(!o)return;let i=new A({scopeRef:e});o.addChild(i),i.parent=o,this.fastMap.set(e,i),n&&(i.nodeToRestore=n)}addNode(e){this.fastMap.set(e.scopeRef,e)}removeTreeNode(e){if(e===null)return;let t=this.fastMap.get(e);if(!t)return;let n=t.parent;for(let i of this.traverse())i!==t&&t.nodeToRestore&&i.nodeToRestore&&t.scopeRef&&t.scopeRef.current&&E(i.nodeToRestore,t.scopeRef.current)&&(i.nodeToRestore=t.nodeToRestore);let o=t.children;n&&(n.removeChild(t),o.size>0&&o.forEach(i=>n&&n.addChild(i))),this.fastMap.delete(t.scopeRef)}*traverse(e=this.root){if(e.scopeRef!=null&&(yield e),e.children.size>0)for(let t of e.children)yield*this.traverse(t)}clone(){var e;let t=new M;var n;for(let o of this.traverse())t.addTreeNode(o.scopeRef,(n=(e=o.parent)===null||e===void 0?void 0:e.scopeRef)!==null&&n!==void 0?n:null,o.nodeToRestore);return t}constructor(){this.fastMap=new Map,this.root=new A({scopeRef:null}),this.fastMap.set(null,this.root)}}class A{addChild(e){this.children.add(e),e.parent=this}removeChild(e){this.children.delete(e),e.parent=void 0}constructor(e){this.children=new Set,this.contain=!1,this.scopeRef=e.scopeRef}}let b=new M;var W={ease:[.36,.66,.4,1],easeIn:[.4,0,1,1],easeOut:[0,0,.2,1]},ce={scaleSpring:{enter:{transform:"scale(1)",opacity:1,transition:{type:"spring",bounce:0,duration:.2}},exit:{transform:"scale(0.85)",opacity:0,transition:{type:"easeOut",duration:.15}}},scaleSpringOpacity:{initial:{opacity:0,transform:"scale(0.8)"},enter:{opacity:1,transform:"scale(1)",transition:{type:"spring",bounce:0,duration:.3}},exit:{opacity:0,transform:"scale(0.96)",transition:{type:"easeOut",bounce:0,duration:.15}}},fade:{enter:{opacity:1,transition:{duration:.4,ease:W.ease}},exit:{opacity:0,transition:{duration:.3,ease:W.ease}}},collapse:{enter:{opacity:1,height:"auto",transition:{height:{type:"spring",bounce:0,duration:.3},opacity:{easings:"ease",duration:.4}}},exit:{opacity:0,height:0,transition:{easings:"ease",duration:.3}}}};export{ae as $,W as T,k as a,ce as b,le as c,ie as d,ue as e};
