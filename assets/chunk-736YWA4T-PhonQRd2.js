import{r as m,R as F}from"./index-CL4t8jtQ.js";function Me(e,t,n){let[r,o]=m.useState(e||t),a=m.useRef(e!==void 0),u=e!==void 0;m.useEffect(()=>{let d=a.current;d!==u&&console.warn(`WARN: A component changed from ${d?"controlled":"uncontrolled"} to ${u?"controlled":"uncontrolled"}.`),a.current=u},[u]);let i=u?e:r,$=m.useCallback((d,...l)=>{let c=(f,...s)=>{n&&(Object.is(i,f)||n(f,...s)),u||(i=f)};typeof d=="function"?(console.warn("We can not support a function callback. See Github Issues for details https://github.com/adobe/react-spectrum/issues/2320"),o((s,...v)=>{let w=d(u?i:s,...v);return c(w,...l),u?s:w})):(u||o(d),c(d,...l))},[u,i,n]);return[i,$]}const y=typeof document<"u"?F.useLayoutEffect:()=>{},E=e=>{var t;return(t=e==null?void 0:e.ownerDocument)!==null&&t!==void 0?t:document},D=e=>e&&"window"in e&&e.window===e?e:E(e).defaultView||window;function J(e){if(be())e.focus({preventScroll:!0});else{let t=pe(e);e.focus(),$e(t)}}let M=null;function be(){if(M==null){M=!1;try{document.createElement("div").focus({get preventScroll(){return M=!0,!0}})}catch{}}return M}function pe(e){let t=e.parentNode,n=[],r=document.scrollingElement||document.documentElement;for(;t instanceof HTMLElement&&t!==r;)(t.offsetHeight<t.scrollHeight||t.offsetWidth<t.scrollWidth)&&n.push({element:t,scrollTop:t.scrollTop,scrollLeft:t.scrollLeft}),t=t.parentNode;return r instanceof HTMLElement&&n.push({element:r,scrollTop:r.scrollTop,scrollLeft:r.scrollLeft}),n}function $e(e){for(let{element:t,scrollTop:n,scrollLeft:r}of e)t.scrollTop=n,t.scrollLeft=r}function B(e){var t;return typeof window>"u"||window.navigator==null?!1:((t=window.navigator.userAgentData)===null||t===void 0?void 0:t.brands.some(n=>e.test(n.brand)))||e.test(window.navigator.userAgent)}function z(e){var t;return typeof window<"u"&&window.navigator!=null?e.test(((t=window.navigator.userAgentData)===null||t===void 0?void 0:t.platform)||window.navigator.platform):!1}function R(e){let t=null;return()=>(t==null&&(t=e()),t)}const ne=R(function(){return z(/^Mac/i)}),ve=R(function(){return z(/^iPhone/i)}),me=R(function(){return z(/^iPad/i)||ne()&&navigator.maxTouchPoints>1}),De=R(function(){return ve()||me()}),Oe=R(function(){return B(/AppleWebKit/i)&&!re()}),re=R(function(){return B(/Chrome/i)}),oe=R(function(){return B(/Android/i)});let C=new Map,P=new Set;function Y(){if(typeof window>"u")return;function e(r){return"propertyName"in r}let t=r=>{if(!e(r)||!r.target)return;let o=C.get(r.target);o||(o=new Set,C.set(r.target,o),r.target.addEventListener("transitioncancel",n,{once:!0})),o.add(r.propertyName)},n=r=>{if(!e(r)||!r.target)return;let o=C.get(r.target);if(o&&(o.delete(r.propertyName),o.size===0&&(r.target.removeEventListener("transitioncancel",n),C.delete(r.target)),C.size===0)){for(let a of P)a();P.clear()}};document.body.addEventListener("transitionrun",t),document.body.addEventListener("transitionend",n)}typeof document<"u"&&(document.readyState!=="loading"?Y():document.addEventListener("DOMContentLoaded",Y));function Ee(e){requestAnimationFrame(()=>{C.size===0?e():P.add(e)})}function he(e){return e.mozInputSource===0&&e.isTrusted?!0:oe()&&e.pointerType?e.type==="click"&&e.buttons===1:e.detail===0&&!e.pointerType}let A=null,ge=new Set,k=new Map,x=!1,V=!1;function G(e,t){for(let n of ge)n(e,t)}function ye(e){return!(e.metaKey||!ne()&&e.altKey||e.ctrlKey||e.key==="Control"||e.key==="Shift"||e.key==="Meta")}function O(e){x=!0,ye(e)&&(A="keyboard",G("keyboard",e))}function h(e){A="pointer",(e.type==="mousedown"||e.type==="pointerdown")&&(x=!0,G("pointer",e))}function ae(e){he(e)&&(x=!0,A="virtual")}function ie(e){e.target===window||e.target===document||(!x&&!V&&(A="virtual",G("virtual",e)),x=!1,V=!1)}function ue(){x=!1,V=!0}function Q(e){if(typeof window>"u"||k.get(D(e)))return;const t=D(e),n=E(e);let r=t.HTMLElement.prototype.focus;t.HTMLElement.prototype.focus=function(){x=!0,r.apply(this,arguments)},n.addEventListener("keydown",O,!0),n.addEventListener("keyup",O,!0),n.addEventListener("click",ae,!0),t.addEventListener("focus",ie,!0),t.addEventListener("blur",ue,!1),typeof PointerEvent<"u"?(n.addEventListener("pointerdown",h,!0),n.addEventListener("pointermove",h,!0),n.addEventListener("pointerup",h,!0)):(n.addEventListener("mousedown",h,!0),n.addEventListener("mousemove",h,!0),n.addEventListener("mouseup",h,!0)),t.addEventListener("beforeunload",()=>{de(e)},{once:!0}),k.set(t,{focus:r})}const de=(e,t)=>{const n=D(e),r=E(e);t&&r.removeEventListener("DOMContentLoaded",t),k.has(n)&&(n.HTMLElement.prototype.focus=k.get(n).focus,r.removeEventListener("keydown",O,!0),r.removeEventListener("keyup",O,!0),r.removeEventListener("click",ae,!0),n.removeEventListener("focus",ie,!0),n.removeEventListener("blur",ue,!1),typeof PointerEvent<"u"?(r.removeEventListener("pointerdown",h,!0),r.removeEventListener("pointermove",h,!0),r.removeEventListener("pointerup",h,!0)):(r.removeEventListener("mousedown",h,!0),r.removeEventListener("mousemove",h,!0),r.removeEventListener("mouseup",h,!0)),k.delete(n))};function we(e){const t=E(e);let n;return t.readyState!=="loading"?Q(e):(n=()=>{Q(e)},t.addEventListener("DOMContentLoaded",n)),()=>de(e,n)}typeof document<"u"&&we();function le(){return A}function Ne(e){const t=E(e);if(le()==="virtual"){let n=t.activeElement;Ee(()=>{t.activeElement===n&&e.isConnected&&J(e)})}else J(e)}function Te(e){const t=D(e);if(!(e instanceof t.HTMLElement)&&!(e instanceof t.SVGElement))return!1;let{display:n,visibility:r}=e.style,o=n!=="none"&&r!=="hidden"&&r!=="collapse";if(o){const{getComputedStyle:a}=e.ownerDocument.defaultView;let{display:u,visibility:i}=a(e);o=u!=="none"&&i!=="hidden"&&i!=="collapse"}return o}function Le(e,t){return!e.hasAttribute("hidden")&&!e.hasAttribute("data-react-aria-prevent-focus")&&(e.nodeName==="DETAILS"&&t&&t.nodeName!=="SUMMARY"?e.hasAttribute("open"):!0)}function ce(e,t){return e.nodeName!=="#comment"&&Te(e)&&Le(e,t)&&(!e.parentElement||ce(e.parentElement,e))}const X=F.createContext(null),H="react-aria-focus-scope-restore";let b=null;function Ke(e){let{children:t,contain:n,restoreFocus:r,autoFocus:o}=e,a=m.useRef(null),u=m.useRef(null),i=m.useRef([]),{parentNode:$}=m.useContext(X)||{},d=m.useMemo(()=>new W({scopeRef:i}),[i]);y(()=>{let f=$||p.root;if(p.getTreeNode(f.scopeRef)&&b&&!K(b,f.scopeRef)){let s=p.getTreeNode(b);s&&(f=s)}f.addChild(d),p.addNode(d)},[d,$]),y(()=>{let f=p.getTreeNode(i);f&&(f.contain=!!n)},[n]),y(()=>{var f;let s=(f=a.current)===null||f===void 0?void 0:f.nextSibling,v=[],w=I=>I.stopPropagation();for(;s&&s!==u.current;)v.push(s),s.addEventListener(H,w),s=s.nextSibling;return i.current=v,()=>{for(let I of v)I.removeEventListener(H,w)}},[t]),_e(i,r,n),Ce(i,n),ke(i,r,n),Fe(i,o),m.useEffect(()=>{const f=E(i.current?i.current[0]:void 0).activeElement;let s=null;if(g(f,i.current)){for(let v of p.traverse())v.scopeRef&&g(f,v.scopeRef.current)&&(s=v);s===p.getTreeNode(i)&&(b=s.scopeRef)}},[i]),y(()=>()=>{var f,s,v;let w=(v=(s=p.getTreeNode(i))===null||s===void 0||(f=s.parent)===null||f===void 0?void 0:f.scopeRef)!==null&&v!==void 0?v:null;(i===b||K(i,b))&&(!w||p.getTreeNode(w))&&(b=w),p.removeTreeNode(i)},[i]);let l=m.useMemo(()=>Se(i),[]),c=m.useMemo(()=>({focusManager:l,parentNode:d}),[d,l]);return F.createElement(X.Provider,{value:c},F.createElement("span",{"data-focus-scope-start":!0,hidden:!0,ref:a}),t,F.createElement("span",{"data-focus-scope-end":!0,hidden:!0,ref:u}))}function Se(e){return{focusNext(t={}){let n=e.current,{from:r,tabbable:o,wrap:a,accept:u}=t,i=r||E(n[0]).activeElement,$=n[0].previousElementSibling,d=S(n),l=L(d,{tabbable:o,accept:u},n);l.currentNode=g(i,n)?i:$;let c=l.nextNode();return!c&&a&&(l.currentNode=$,c=l.nextNode()),c&&N(c,!0),c},focusPrevious(t={}){let n=e.current,{from:r,tabbable:o,wrap:a,accept:u}=t,i=r||E(n[0]).activeElement,$=n[n.length-1].nextElementSibling,d=S(n),l=L(d,{tabbable:o,accept:u},n);l.currentNode=g(i,n)?i:$;let c=l.previousNode();return!c&&a&&(l.currentNode=$,c=l.previousNode()),c&&N(c,!0),c},focusFirst(t={}){let n=e.current,{tabbable:r,accept:o}=t,a=S(n),u=L(a,{tabbable:r,accept:o},n);u.currentNode=n[0].previousElementSibling;let i=u.nextNode();return i&&N(i,!0),i},focusLast(t={}){let n=e.current,{tabbable:r,accept:o}=t,a=S(n),u=L(a,{tabbable:r,accept:o},n);u.currentNode=n[n.length-1].nextElementSibling;let i=u.previousNode();return i&&N(i,!0),i}}}const U=["input:not([disabled]):not([type=hidden])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","a[href]","area[href]","summary","iframe","object","embed","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable^="false"])'],xe=U.join(":not([hidden]),")+",[tabindex]:not([disabled]):not([hidden])";U.push('[tabindex]:not([tabindex="-1"]):not([disabled])');const Re=U.join(':not([hidden]):not([tabindex="-1"]),');function S(e){return e[0].parentElement}function _(e){let t=p.getTreeNode(b);for(;t&&t.scopeRef!==e;){if(t.contain)return!1;t=t.parent}return!0}function Ce(e,t){let n=m.useRef(void 0),r=m.useRef(void 0);y(()=>{let o=e.current;if(!t){r.current&&(cancelAnimationFrame(r.current),r.current=void 0);return}const a=E(o?o[0]:void 0);let u=d=>{if(d.key!=="Tab"||d.altKey||d.ctrlKey||d.metaKey||!_(e)||d.isComposing)return;let l=a.activeElement,c=e.current;if(!c||!g(l,c))return;let f=S(c),s=L(f,{tabbable:!0},c);if(!l)return;s.currentNode=l;let v=d.shiftKey?s.previousNode():s.nextNode();v||(s.currentNode=d.shiftKey?c[c.length-1].nextElementSibling:c[0].previousElementSibling,v=d.shiftKey?s.previousNode():s.nextNode()),d.preventDefault(),v&&N(v,!0)},i=d=>{(!b||K(b,e))&&g(d.target,e.current)?(b=e,n.current=d.target):_(e)&&!T(d.target,e)?n.current?n.current.focus():b&&b.current&&j(b.current):_(e)&&(n.current=d.target)},$=d=>{r.current&&cancelAnimationFrame(r.current),r.current=requestAnimationFrame(()=>{let l=le();if(!((l==="virtual"||l===null)&&oe()&&re())&&a.activeElement&&_(e)&&!T(a.activeElement,e))if(b=e,a.body.contains(d.target)){var f;n.current=d.target,(f=n.current)===null||f===void 0||f.focus()}else b.current&&j(b.current)})};return a.addEventListener("keydown",u,!1),a.addEventListener("focusin",i,!1),o==null||o.forEach(d=>d.addEventListener("focusin",i,!1)),o==null||o.forEach(d=>d.addEventListener("focusout",$,!1)),()=>{a.removeEventListener("keydown",u,!1),a.removeEventListener("focusin",i,!1),o==null||o.forEach(d=>d.removeEventListener("focusin",i,!1)),o==null||o.forEach(d=>d.removeEventListener("focusout",$,!1))}},[e,t]),y(()=>()=>{r.current&&cancelAnimationFrame(r.current)},[r])}function fe(e){return T(e)}function g(e,t){return!e||!t?!1:t.some(n=>n.contains(e))}function T(e,t=null){if(e instanceof Element&&e.closest("[data-react-aria-top-layer]"))return!0;for(let{scopeRef:n}of p.traverse(p.getTreeNode(t)))if(n&&g(e,n.current))return!0;return!1}function Ie(e){return T(e,b)}function K(e,t){var n;let r=(n=p.getTreeNode(t))===null||n===void 0?void 0:n.parent;for(;r;){if(r.scopeRef===e)return!0;r=r.parent}return!1}function N(e,t=!1){if(e!=null&&!t)try{Ne(e)}catch{}else if(e!=null)try{e.focus()}catch{}}function se(e,t=!0){let n=e[0].previousElementSibling,r=S(e),o=L(r,{tabbable:t},e);o.currentNode=n;let a=o.nextNode();return t&&!a&&(r=S(e),o=L(r,{tabbable:!1},e),o.currentNode=n,a=o.nextNode()),a}function j(e,t=!0){N(se(e,t))}function Fe(e,t){const n=F.useRef(t);m.useEffect(()=>{if(n.current){b=e;const r=E(e.current?e.current[0]:void 0);!g(r.activeElement,b.current)&&e.current&&j(e.current)}n.current=!1},[e])}function _e(e,t,n){y(()=>{if(t||n)return;let r=e.current;const o=E(r?r[0]:void 0);let a=u=>{let i=u.target;g(i,e.current)?b=e:fe(i)||(b=null)};return o.addEventListener("focusin",a,!1),r==null||r.forEach(u=>u.addEventListener("focusin",a,!1)),()=>{o.removeEventListener("focusin",a,!1),r==null||r.forEach(u=>u.removeEventListener("focusin",a,!1))}},[e,t,n])}function Z(e){let t=p.getTreeNode(b);for(;t&&t.scopeRef!==e;){if(t.nodeToRestore)return!1;t=t.parent}return(t==null?void 0:t.scopeRef)===e}function ke(e,t,n){const r=m.useRef(typeof document<"u"?E(e.current?e.current[0]:void 0).activeElement:null);y(()=>{let o=e.current;const a=E(o?o[0]:void 0);if(!t||n)return;let u=()=>{(!b||K(b,e))&&g(a.activeElement,e.current)&&(b=e)};return a.addEventListener("focusin",u,!1),o==null||o.forEach(i=>i.addEventListener("focusin",u,!1)),()=>{a.removeEventListener("focusin",u,!1),o==null||o.forEach(i=>i.removeEventListener("focusin",u,!1))}},[e,n]),y(()=>{const o=E(e.current?e.current[0]:void 0);if(!t)return;let a=u=>{if(u.key!=="Tab"||u.altKey||u.ctrlKey||u.metaKey||!_(e)||u.isComposing)return;let i=o.activeElement;if(!T(i,e)||!Z(e))return;let $=p.getTreeNode(e);if(!$)return;let d=$.nodeToRestore,l=L(o.body,{tabbable:!0});l.currentNode=i;let c=u.shiftKey?l.previousNode():l.nextNode();if((!d||!o.body.contains(d)||d===o.body)&&(d=void 0,$.nodeToRestore=void 0),(!c||!T(c,e))&&d){l.currentNode=d;do c=u.shiftKey?l.previousNode():l.nextNode();while(T(c,e));u.preventDefault(),u.stopPropagation(),c?N(c,!0):fe(d)?N(d,!0):i.blur()}};return n||o.addEventListener("keydown",a,!0),()=>{n||o.removeEventListener("keydown",a,!0)}},[e,t,n]),y(()=>{const o=E(e.current?e.current[0]:void 0);if(!t)return;let a=p.getTreeNode(e);if(a){var u;return a.nodeToRestore=(u=r.current)!==null&&u!==void 0?u:void 0,()=>{let i=p.getTreeNode(e);if(!i)return;let $=i.nodeToRestore;if(t&&$&&(o.activeElement&&T(o.activeElement,e)||o.activeElement===o.body&&Z(e))){let d=p.clone();requestAnimationFrame(()=>{if(o.activeElement===o.body){let l=d.getTreeNode(e);for(;l;){if(l.nodeToRestore&&l.nodeToRestore.isConnected){ee(l.nodeToRestore);return}l=l.parent}for(l=d.getTreeNode(e);l;){if(l.scopeRef&&l.scopeRef.current&&p.getTreeNode(l.scopeRef)){let c=se(l.scopeRef.current,!0);ee(c);return}l=l.parent}}})}}}},[e,t])}function ee(e){e.dispatchEvent(new CustomEvent(H,{bubbles:!0,cancelable:!0}))&&N(e)}function L(e,t,n){let r=t!=null&&t.tabbable?Re:xe,o=E(e).createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode(a){var u;return!(t==null||(u=t.from)===null||u===void 0)&&u.contains(a)?NodeFilter.FILTER_REJECT:a.matches(r)&&ce(a)&&(!n||g(a,n))&&(!(t!=null&&t.accept)||t.accept(a))?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});return t!=null&&t.from&&(o.currentNode=t.from),o}class q{get size(){return this.fastMap.size}getTreeNode(t){return this.fastMap.get(t)}addTreeNode(t,n,r){let o=this.fastMap.get(n??null);if(!o)return;let a=new W({scopeRef:t});o.addChild(a),a.parent=o,this.fastMap.set(t,a),r&&(a.nodeToRestore=r)}addNode(t){this.fastMap.set(t.scopeRef,t)}removeTreeNode(t){if(t===null)return;let n=this.fastMap.get(t);if(!n)return;let r=n.parent;for(let a of this.traverse())a!==n&&n.nodeToRestore&&a.nodeToRestore&&n.scopeRef&&n.scopeRef.current&&g(a.nodeToRestore,n.scopeRef.current)&&(a.nodeToRestore=n.nodeToRestore);let o=n.children;r&&(r.removeChild(n),o.size>0&&o.forEach(a=>r&&r.addChild(a))),this.fastMap.delete(n.scopeRef)}*traverse(t=this.root){if(t.scopeRef!=null&&(yield t),t.children.size>0)for(let n of t.children)yield*this.traverse(n)}clone(){var t;let n=new q;var r;for(let o of this.traverse())n.addTreeNode(o.scopeRef,(r=(t=o.parent)===null||t===void 0?void 0:t.scopeRef)!==null&&r!==void 0?r:null,o.nodeToRestore);return n}constructor(){this.fastMap=new Map,this.root=new W({scopeRef:null}),this.fastMap.set(null,this.root)}}class W{addChild(t){this.children.add(t),t.parent=this}removeChild(t){this.children.delete(t),t.parent=void 0}constructor(t){this.children=new Set,this.contain=!1,this.scopeRef=t.scopeRef}}let p=new q;var te={ease:[.36,.66,.4,1],easeIn:[.4,0,1,1],easeOut:[0,0,.2,1]},Pe={scaleSpring:{enter:{transform:"scale(1)",opacity:1,transition:{type:"spring",bounce:0,duration:.2}},exit:{transform:"scale(0.85)",opacity:0,transition:{type:"easeOut",duration:.15}}},scaleSpringOpacity:{initial:{opacity:0,transform:"scale(0.8)"},enter:{opacity:1,transform:"scale(1)",transition:{type:"spring",bounce:0,duration:.3}},exit:{opacity:0,transform:"scale(0.96)",transition:{type:"easeOut",bounce:0,duration:.15}}},fade:{enter:{opacity:1,transition:{duration:.4,ease:te.ease}},exit:{opacity:0,transition:{duration:.3,ease:te.ease}}},collapse:{enter:{opacity:1,height:"auto",transition:{height:{type:"spring",bounce:0,duration:.3},opacity:{easings:"ease",duration:.4}}},exit:{opacity:0,height:0,transition:{easings:"ease",duration:.3}}}};export{Me as $,te as T,y as a,Pe as b,De as c,Ke as d,Oe as e,E as f,Ie as g};
