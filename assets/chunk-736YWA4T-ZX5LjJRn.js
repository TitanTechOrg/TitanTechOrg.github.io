import{r as m,R as _}from"./index-CzEEEt2j.js";function Me(e,t,n){let[r,o]=m.useState(e||t),a=m.useRef(e!==void 0),u=e!==void 0;m.useEffect(()=>{let c=a.current;c!==u&&console.warn(`WARN: A component changed from ${c?"controlled":"uncontrolled"} to ${u?"controlled":"uncontrolled"}.`),a.current=u},[u]);let i=u?e:r,p=m.useCallback((c,...l)=>{let s=(d,...f)=>{n&&(Object.is(i,d)||n(d,...f)),u||(i=d)};typeof c=="function"?(console.warn("We can not support a function callback. See Github Issues for details https://github.com/adobe/react-spectrum/issues/2320"),o((f,...$)=>{let w=c(u?i:f,...$);return s(w,...l),u?f:w})):(u||o(c),s(c,...l))},[u,i,n]);return[i,p]}const y=typeof document<"u"?_.useLayoutEffect:()=>{},E=e=>{var t;return(t=e==null?void 0:e.ownerDocument)!==null&&t!==void 0?t:document},D=e=>e&&"window"in e&&e.window===e?e:E(e).defaultView||window;function Y(e){if(ve())e.focus({preventScroll:!0});else{let t=be(e);e.focus(),pe(t)}}let O=null;function ve(){if(O==null){O=!1;try{document.createElement("div").focus({get preventScroll(){return O=!0,!0}})}catch{}}return O}function be(e){let t=e.parentNode,n=[],r=document.scrollingElement||document.documentElement;for(;t instanceof HTMLElement&&t!==r;)(t.offsetHeight<t.scrollHeight||t.offsetWidth<t.scrollWidth)&&n.push({element:t,scrollTop:t.scrollTop,scrollLeft:t.scrollLeft}),t=t.parentNode;return r instanceof HTMLElement&&n.push({element:r,scrollTop:r.scrollTop,scrollLeft:r.scrollLeft}),n}function pe(e){for(let{element:t,scrollTop:n,scrollLeft:r}of e)t.scrollTop=n,t.scrollLeft=r}function z(e){var t;return typeof window>"u"||window.navigator==null?!1:((t=window.navigator.userAgentData)===null||t===void 0?void 0:t.brands.some(n=>e.test(n.brand)))||e.test(window.navigator.userAgent)}function G(e){var t;return typeof window<"u"&&window.navigator!=null?e.test(((t=window.navigator.userAgentData)===null||t===void 0?void 0:t.platform)||window.navigator.platform):!1}function R(e){let t=null;return()=>(t==null&&(t=e()),t)}const ne=R(function(){return G(/^Mac/i)}),$e=R(function(){return G(/^iPhone/i)}),me=R(function(){return G(/^iPad/i)||ne()&&navigator.maxTouchPoints>1}),Oe=R(function(){return $e()||me()}),De=R(function(){return z(/AppleWebKit/i)&&!re()}),re=R(function(){return z(/Chrome/i)}),oe=R(function(){return z(/Android/i)});let C=new Map,V=new Set;function Q(){if(typeof window>"u")return;function e(r){return"propertyName"in r}let t=r=>{if(!e(r)||!r.target)return;let o=C.get(r.target);o||(o=new Set,C.set(r.target,o),r.target.addEventListener("transitioncancel",n,{once:!0})),o.add(r.propertyName)},n=r=>{if(!e(r)||!r.target)return;let o=C.get(r.target);if(o&&(o.delete(r.propertyName),o.size===0&&(r.target.removeEventListener("transitioncancel",n),C.delete(r.target)),C.size===0)){for(let a of V)a();V.clear()}};document.body.addEventListener("transitionrun",t),document.body.addEventListener("transitionend",n)}typeof document<"u"&&(document.readyState!=="loading"?Q():document.addEventListener("DOMContentLoaded",Q));function Ee(e){requestAnimationFrame(()=>{C.size===0?e():V.add(e)})}function he(e){return e.mozInputSource===0&&e.isTrusted?!0:oe()&&e.pointerType?e.type==="click"&&e.buttons===1:e.detail===0&&!e.pointerType}let M=null,ge=new Set,A=new Map,x=!1,H=!1;function U(e,t){for(let n of ge)n(e,t)}function ye(e){return!(e.metaKey||!ne()&&e.altKey||e.ctrlKey||e.key==="Control"||e.key==="Shift"||e.key==="Meta")}function I(e){x=!0,ye(e)&&(M="keyboard",U("keyboard",e))}function h(e){M="pointer",(e.type==="mousedown"||e.type==="pointerdown")&&(x=!0,U("pointer",e))}function ae(e){he(e)&&(x=!0,M="virtual")}function ie(e){e.target===window||e.target===document||(!x&&!H&&(M="virtual",U("virtual",e)),x=!1,H=!1)}function ue(){x=!1,H=!0}function X(e){if(typeof window>"u"||A.get(D(e)))return;const t=D(e),n=E(e);let r=t.HTMLElement.prototype.focus;t.HTMLElement.prototype.focus=function(){x=!0,r.apply(this,arguments)},n.addEventListener("keydown",I,!0),n.addEventListener("keyup",I,!0),n.addEventListener("click",ae,!0),t.addEventListener("focus",ie,!0),t.addEventListener("blur",ue,!1),typeof PointerEvent<"u"?(n.addEventListener("pointerdown",h,!0),n.addEventListener("pointermove",h,!0),n.addEventListener("pointerup",h,!0)):(n.addEventListener("mousedown",h,!0),n.addEventListener("mousemove",h,!0),n.addEventListener("mouseup",h,!0)),t.addEventListener("beforeunload",()=>{ce(e)},{once:!0}),A.set(t,{focus:r})}const ce=(e,t)=>{const n=D(e),r=E(e);t&&r.removeEventListener("DOMContentLoaded",t),A.has(n)&&(n.HTMLElement.prototype.focus=A.get(n).focus,r.removeEventListener("keydown",I,!0),r.removeEventListener("keyup",I,!0),r.removeEventListener("click",ae,!0),n.removeEventListener("focus",ie,!0),n.removeEventListener("blur",ue,!1),typeof PointerEvent<"u"?(r.removeEventListener("pointerdown",h,!0),r.removeEventListener("pointermove",h,!0),r.removeEventListener("pointerup",h,!0)):(r.removeEventListener("mousedown",h,!0),r.removeEventListener("mousemove",h,!0),r.removeEventListener("mouseup",h,!0)),A.delete(n))};function we(e){const t=E(e);let n;return t.readyState!=="loading"?X(e):(n=()=>{X(e)},t.addEventListener("DOMContentLoaded",n)),()=>ce(e,n)}typeof document<"u"&&we();function le(){return M}function Ne(e){const t=E(e);if(le()==="virtual"){let n=t.activeElement;Ee(()=>{t.activeElement===n&&e.isConnected&&Y(e)})}else Y(e)}function Te(e){const t=D(e);if(!(e instanceof t.HTMLElement)&&!(e instanceof t.SVGElement))return!1;let{display:n,visibility:r}=e.style,o=n!=="none"&&r!=="hidden"&&r!=="collapse";if(o){const{getComputedStyle:a}=e.ownerDocument.defaultView;let{display:u,visibility:i}=a(e);o=u!=="none"&&i!=="hidden"&&i!=="collapse"}return o}function Le(e,t){return!e.hasAttribute("hidden")&&!e.hasAttribute("data-react-aria-prevent-focus")&&(e.nodeName==="DETAILS"&&t&&t.nodeName!=="SUMMARY"?e.hasAttribute("open"):!0)}function se(e,t){return e.nodeName!=="#comment"&&Te(e)&&Le(e,t)&&(!e.parentElement||se(e.parentElement,e))}const Z=_.createContext(null),j="react-aria-focus-scope-restore";let v=null;function Ie(e){let{children:t,contain:n,restoreFocus:r,autoFocus:o}=e,a=m.useRef(null),u=m.useRef(null),i=m.useRef([]),{parentNode:p}=m.useContext(Z)||{},c=m.useMemo(()=>new B({scopeRef:i}),[i]);y(()=>{let d=p||b.root;if(b.getTreeNode(d.scopeRef)&&v&&!K(v,d.scopeRef)){let f=b.getTreeNode(v);f&&(d=f)}d.addChild(c),b.addNode(c)},[c,p]),y(()=>{let d=b.getTreeNode(i);d&&(d.contain=!!n)},[n]),y(()=>{var d;let f=(d=a.current)===null||d===void 0?void 0:d.nextSibling,$=[],w=P=>P.stopPropagation();for(;f&&f!==u.current;)$.push(f),f.addEventListener(j,w),f=f.nextSibling;return i.current=$,()=>{for(let P of $)P.removeEventListener(j,w)}},[t]),_e(i,r,n),Fe(i,n),ke(i,r,n),Ce(i,o),m.useEffect(()=>{const d=E(i.current?i.current[0]:void 0).activeElement;let f=null;if(g(d,i.current)){for(let $ of b.traverse())$.scopeRef&&g(d,$.scopeRef.current)&&(f=$);f===b.getTreeNode(i)&&(v=f.scopeRef)}},[i]),y(()=>()=>{var d,f,$;let w=($=(f=b.getTreeNode(i))===null||f===void 0||(d=f.parent)===null||d===void 0?void 0:d.scopeRef)!==null&&$!==void 0?$:null;(i===v||K(i,v))&&(!w||b.getTreeNode(w))&&(v=w),b.removeTreeNode(i)},[i]);let l=m.useMemo(()=>Se(i),[]),s=m.useMemo(()=>({focusManager:l,parentNode:c}),[c,l]);return _.createElement(Z.Provider,{value:s},_.createElement("span",{"data-focus-scope-start":!0,hidden:!0,ref:a}),t,_.createElement("span",{"data-focus-scope-end":!0,hidden:!0,ref:u}))}function Se(e){return{focusNext(t={}){let n=e.current,{from:r,tabbable:o,wrap:a,accept:u}=t,i=r||E(n[0]).activeElement,p=n[0].previousElementSibling,c=S(n),l=L(c,{tabbable:o,accept:u},n);l.currentNode=g(i,n)?i:p;let s=l.nextNode();return!s&&a&&(l.currentNode=p,s=l.nextNode()),s&&N(s,!0),s},focusPrevious(t={}){let n=e.current,{from:r,tabbable:o,wrap:a,accept:u}=t,i=r||E(n[0]).activeElement,p=n[n.length-1].nextElementSibling,c=S(n),l=L(c,{tabbable:o,accept:u},n);l.currentNode=g(i,n)?i:p;let s=l.previousNode();return!s&&a&&(l.currentNode=p,s=l.previousNode()),s&&N(s,!0),s},focusFirst(t={}){let n=e.current,{tabbable:r,accept:o}=t,a=S(n),u=L(a,{tabbable:r,accept:o},n);u.currentNode=n[0].previousElementSibling;let i=u.nextNode();return i&&N(i,!0),i},focusLast(t={}){let n=e.current,{tabbable:r,accept:o}=t,a=S(n),u=L(a,{tabbable:r,accept:o},n);u.currentNode=n[n.length-1].nextElementSibling;let i=u.previousNode();return i&&N(i,!0),i}}}const q=["input:not([disabled]):not([type=hidden])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","a[href]","area[href]","summary","iframe","object","embed","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable^="false"])'],xe=q.join(":not([hidden]),")+",[tabindex]:not([disabled]):not([hidden])";q.push('[tabindex]:not([tabindex="-1"]):not([disabled])');const Re=q.join(':not([hidden]):not([tabindex="-1"]),');function S(e){return e[0].parentElement}function k(e){let t=b.getTreeNode(v);for(;t&&t.scopeRef!==e;){if(t.contain)return!1;t=t.parent}return!0}function Fe(e,t){let n=m.useRef(void 0),r=m.useRef(void 0);y(()=>{let o=e.current;if(!t){r.current&&(cancelAnimationFrame(r.current),r.current=void 0);return}const a=E(o?o[0]:void 0);let u=c=>{if(c.key!=="Tab"||c.altKey||c.ctrlKey||c.metaKey||!k(e)||c.isComposing)return;let l=a.activeElement,s=e.current;if(!s||!g(l,s))return;let d=S(s),f=L(d,{tabbable:!0},s);if(!l)return;f.currentNode=l;let $=c.shiftKey?f.previousNode():f.nextNode();$||(f.currentNode=c.shiftKey?s[s.length-1].nextElementSibling:s[0].previousElementSibling,$=c.shiftKey?f.previousNode():f.nextNode()),c.preventDefault(),$&&N($,!0)},i=c=>{(!v||K(v,e))&&g(c.target,e.current)?(v=e,n.current=c.target):k(e)&&!T(c.target,e)?n.current?n.current.focus():v&&v.current&&W(v.current):k(e)&&(n.current=c.target)},p=c=>{r.current&&cancelAnimationFrame(r.current),r.current=requestAnimationFrame(()=>{let l=le();if(!((l==="virtual"||l===null)&&oe()&&re())&&a.activeElement&&k(e)&&!T(a.activeElement,e))if(v=e,a.body.contains(c.target)){var d;n.current=c.target,(d=n.current)===null||d===void 0||d.focus()}else v.current&&W(v.current)})};return a.addEventListener("keydown",u,!1),a.addEventListener("focusin",i,!1),o==null||o.forEach(c=>c.addEventListener("focusin",i,!1)),o==null||o.forEach(c=>c.addEventListener("focusout",p,!1)),()=>{a.removeEventListener("keydown",u,!1),a.removeEventListener("focusin",i,!1),o==null||o.forEach(c=>c.removeEventListener("focusin",i,!1)),o==null||o.forEach(c=>c.removeEventListener("focusout",p,!1))}},[e,t]),y(()=>()=>{r.current&&cancelAnimationFrame(r.current)},[r])}function de(e){return T(e)}function g(e,t){return!e||!t?!1:t.some(n=>n.contains(e))}function T(e,t=null){if(e instanceof Element&&e.closest("[data-react-aria-top-layer]"))return!0;for(let{scopeRef:n}of b.traverse(b.getTreeNode(t)))if(n&&g(e,n.current))return!0;return!1}function Ke(e){return T(e,v)}function K(e,t){var n;let r=(n=b.getTreeNode(t))===null||n===void 0?void 0:n.parent;for(;r;){if(r.scopeRef===e)return!0;r=r.parent}return!1}function N(e,t=!1){if(e!=null&&!t)try{Ne(e)}catch{}else if(e!=null)try{e.focus()}catch{}}function fe(e,t=!0){let n=e[0].previousElementSibling,r=S(e),o=L(r,{tabbable:t},e);o.currentNode=n;let a=o.nextNode();return t&&!a&&(r=S(e),o=L(r,{tabbable:!1},e),o.currentNode=n,a=o.nextNode()),a}function W(e,t=!0){N(fe(e,t))}function Ce(e,t){const n=_.useRef(t);m.useEffect(()=>{if(n.current){v=e;const r=E(e.current?e.current[0]:void 0);!g(r.activeElement,v.current)&&e.current&&W(e.current)}n.current=!1},[e])}function _e(e,t,n){y(()=>{if(t||n)return;let r=e.current;const o=E(r?r[0]:void 0);let a=u=>{let i=u.target;g(i,e.current)?v=e:de(i)||(v=null)};return o.addEventListener("focusin",a,!1),r==null||r.forEach(u=>u.addEventListener("focusin",a,!1)),()=>{o.removeEventListener("focusin",a,!1),r==null||r.forEach(u=>u.removeEventListener("focusin",a,!1))}},[e,t,n])}function ee(e){let t=b.getTreeNode(v);for(;t&&t.scopeRef!==e;){if(t.nodeToRestore)return!1;t=t.parent}return(t==null?void 0:t.scopeRef)===e}function ke(e,t,n){const r=m.useRef(typeof document<"u"?E(e.current?e.current[0]:void 0).activeElement:null);y(()=>{let o=e.current;const a=E(o?o[0]:void 0);if(!t||n)return;let u=()=>{(!v||K(v,e))&&g(a.activeElement,e.current)&&(v=e)};return a.addEventListener("focusin",u,!1),o==null||o.forEach(i=>i.addEventListener("focusin",u,!1)),()=>{a.removeEventListener("focusin",u,!1),o==null||o.forEach(i=>i.removeEventListener("focusin",u,!1))}},[e,n]),y(()=>{const o=E(e.current?e.current[0]:void 0);if(!t)return;let a=u=>{if(u.key!=="Tab"||u.altKey||u.ctrlKey||u.metaKey||!k(e)||u.isComposing)return;let i=o.activeElement;if(!T(i,e)||!ee(e))return;let p=b.getTreeNode(e);if(!p)return;let c=p.nodeToRestore,l=L(o.body,{tabbable:!0});l.currentNode=i;let s=u.shiftKey?l.previousNode():l.nextNode();if((!c||!o.body.contains(c)||c===o.body)&&(c=void 0,p.nodeToRestore=void 0),(!s||!T(s,e))&&c){l.currentNode=c;do s=u.shiftKey?l.previousNode():l.nextNode();while(T(s,e));u.preventDefault(),u.stopPropagation(),s?N(s,!0):de(c)?N(c,!0):i.blur()}};return n||o.addEventListener("keydown",a,!0),()=>{n||o.removeEventListener("keydown",a,!0)}},[e,t,n]),y(()=>{const o=E(e.current?e.current[0]:void 0);if(!t)return;let a=b.getTreeNode(e);if(a){var u;return a.nodeToRestore=(u=r.current)!==null&&u!==void 0?u:void 0,()=>{let i=b.getTreeNode(e);if(!i)return;let p=i.nodeToRestore;if(t&&p&&(o.activeElement&&T(o.activeElement,e)||o.activeElement===o.body&&ee(e))){let c=b.clone();requestAnimationFrame(()=>{if(o.activeElement===o.body){let l=c.getTreeNode(e);for(;l;){if(l.nodeToRestore&&l.nodeToRestore.isConnected){te(l.nodeToRestore);return}l=l.parent}for(l=c.getTreeNode(e);l;){if(l.scopeRef&&l.scopeRef.current&&b.getTreeNode(l.scopeRef)){let s=fe(l.scopeRef.current,!0);te(s);return}l=l.parent}}})}}}},[e,t])}function te(e){e.dispatchEvent(new CustomEvent(j,{bubbles:!0,cancelable:!0}))&&N(e)}function L(e,t,n){let r=t!=null&&t.tabbable?Re:xe,o=E(e).createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode(a){var u;return!(t==null||(u=t.from)===null||u===void 0)&&u.contains(a)?NodeFilter.FILTER_REJECT:a.matches(r)&&se(a)&&(!n||g(a,n))&&(!(t!=null&&t.accept)||t.accept(a))?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});return t!=null&&t.from&&(o.currentNode=t.from),o}class J{get size(){return this.fastMap.size}getTreeNode(t){return this.fastMap.get(t)}addTreeNode(t,n,r){let o=this.fastMap.get(n??null);if(!o)return;let a=new B({scopeRef:t});o.addChild(a),a.parent=o,this.fastMap.set(t,a),r&&(a.nodeToRestore=r)}addNode(t){this.fastMap.set(t.scopeRef,t)}removeTreeNode(t){if(t===null)return;let n=this.fastMap.get(t);if(!n)return;let r=n.parent;for(let a of this.traverse())a!==n&&n.nodeToRestore&&a.nodeToRestore&&n.scopeRef&&n.scopeRef.current&&g(a.nodeToRestore,n.scopeRef.current)&&(a.nodeToRestore=n.nodeToRestore);let o=n.children;r&&(r.removeChild(n),o.size>0&&o.forEach(a=>r&&r.addChild(a))),this.fastMap.delete(n.scopeRef)}*traverse(t=this.root){if(t.scopeRef!=null&&(yield t),t.children.size>0)for(let n of t.children)yield*this.traverse(n)}clone(){var t;let n=new J;var r;for(let o of this.traverse())n.addTreeNode(o.scopeRef,(r=(t=o.parent)===null||t===void 0?void 0:t.scopeRef)!==null&&r!==void 0?r:null,o.nodeToRestore);return n}constructor(){this.fastMap=new Map,this.root=new B({scopeRef:null}),this.fastMap.set(null,this.root)}}class B{addChild(t){this.children.add(t),t.parent=this}removeChild(t){this.children.delete(t),t.parent=void 0}constructor(t){this.children=new Set,this.contain=!1,this.scopeRef=t.scopeRef}}let b=new J;var F={ease:[.36,.66,.4,1],easeIn:[.4,0,1,1],easeOut:[0,0,.2,1],easeInOut:[.4,0,.2,1],spring:[.155,1.105,.295,1.12],springOut:[.57,-.15,.62,.07],softSpring:[.16,1.11,.3,1.02]},Pe={scaleSpring:{enter:{transform:"scale(1)",opacity:1,transition:{type:"spring",bounce:0,duration:.2}},exit:{transform:"scale(0.85)",opacity:0,transition:{type:"easeOut",duration:.15}}},scaleSpringOpacity:{initial:{opacity:0,transform:"scale(0.8)"},enter:{opacity:1,transform:"scale(1)",transition:{type:"spring",bounce:0,duration:.3}},exit:{opacity:0,transform:"scale(0.96)",transition:{type:"easeOut",bounce:0,duration:.15}}},scale:{enter:{scale:1},exit:{scale:.95}},scaleFadeIn:{enter:{transform:"scale(1)",opacity:1,transition:{duration:.25,ease:F.easeIn}},exit:{transform:"scale(0.95)",opacity:0,transition:{duration:.2,ease:F.easeOut}}},scaleInOut:{enter:{transform:"scale(1)",opacity:1,transition:{duration:.4,ease:F.ease}},exit:{transform:"scale(1.03)",opacity:0,transition:{duration:.3,ease:F.ease}}},fade:{enter:{opacity:1,transition:{duration:.4,ease:F.ease}},exit:{opacity:0,transition:{duration:.3,ease:F.ease}}},collapse:{enter:{opacity:1,height:"auto",transition:{height:{type:"spring",bounce:0,duration:.3},opacity:{easings:"ease",duration:.4}}},exit:{opacity:0,height:0,transition:{easings:"ease",duration:.3}}}};export{Me as $,F as T,y as a,Pe as b,Oe as c,Ie as d,De as e,E as f,Ke as g};
