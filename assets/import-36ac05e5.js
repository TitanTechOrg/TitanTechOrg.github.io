import{o as S,bu as R,bv as h,X as T,e as d}from"./index-98d3ced5.js";var X=(...a)=>{let e=" ";for(const t of a)if(typeof t=="string"&&t.length>0){e=t;break}return e},Y=a=>S.jsx("svg",{"aria-hidden":"true",focusable:"false",height:"1em",role:"presentation",viewBox:"0 0 24 24",width:"1em",...a,children:S.jsx("path",{d:"M12 2a10 10 0 1010 10A10.016 10.016 0 0012 2zm3.36 12.3a.754.754 0 010 1.06.748.748 0 01-1.06 0l-2.3-2.3-2.3 2.3a.748.748 0 01-1.06 0 .754.754 0 010-1.06l2.3-2.3-2.3-2.3A.75.75 0 019.7 8.64l2.3 2.3 2.3-2.3a.75.75 0 011.06 1.06l-2.3 2.3z",fill:"currentColor"})});function G(a,e,t){let{validationBehavior:r,focus:u}=a;R(()=>{if(r==="native"&&(t!=null&&t.current)){let i=e.realtimeValidation.isInvalid?e.realtimeValidation.validationErrors.join(" ")||"Invalid value.":"";t.current.setCustomValidity(i),t.current.hasAttribute("title")||(t.current.title=""),e.realtimeValidation.isInvalid||e.updateValidation(F(t.current))}});let n=h(()=>{e.resetValidation()}),c=h(i=>{var l;e.displayValidation.isInvalid||e.commitValidation();let s=t==null||(l=t.current)===null||l===void 0?void 0:l.form;if(!i.defaultPrevented&&t&&s&&k(s)===t.current){var f;u?u():(f=t.current)===null||f===void 0||f.focus(),T("keyboard")}i.preventDefault()}),v=h(()=>{e.commitValidation()});d.useEffect(()=>{let i=t==null?void 0:t.current;if(!i)return;let l=i.form;return i.addEventListener("invalid",c),i.addEventListener("change",v),l==null||l.addEventListener("reset",n),()=>{i.removeEventListener("invalid",c),i.removeEventListener("change",v),l==null||l.removeEventListener("reset",n)}},[t,c,v,n,r])}function U(a){let e=a.validity;return{badInput:e.badInput,customError:e.customError,patternMismatch:e.patternMismatch,rangeOverflow:e.rangeOverflow,rangeUnderflow:e.rangeUnderflow,stepMismatch:e.stepMismatch,tooLong:e.tooLong,tooShort:e.tooShort,typeMismatch:e.typeMismatch,valueMissing:e.valueMissing,valid:e.valid}}function F(a){return{isInvalid:!a.validity.valid,validationDetails:U(a),validationErrors:a.validationMessage?[a.validationMessage]:[]}}function k(a){for(let e=0;e<a.elements.length;e++){let t=a.elements[e];if(!t.validity.valid)return t}return null}const A={badInput:!1,customError:!1,patternMismatch:!1,rangeOverflow:!1,rangeUnderflow:!1,stepMismatch:!1,tooLong:!1,tooShort:!1,typeMismatch:!1,valueMissing:!1,valid:!0},D={...A,customError:!0,valid:!1},m={isInvalid:!1,validationDetails:A,validationErrors:[]},z=d.createContext({}),L="__formValidationState"+Date.now();function H(a){if(a[L]){let{realtimeValidation:e,displayValidation:t,updateValidation:r,resetValidation:u,commitValidation:n}=a[L];return{realtimeValidation:e,displayValidation:t,updateValidation:r,resetValidation:u,commitValidation:n}}return Q(a)}function Q(a){let{isInvalid:e,validationState:t,name:r,value:u,builtinValidation:n,validate:c,validationBehavior:v="aria"}=a;t&&(e||(e=t==="invalid"));let i=e?{isInvalid:!0,validationErrors:[],validationDetails:D}:null,l=d.useMemo(()=>C(_(c,u)),[c,u]);n!=null&&n.validationDetails.valid&&(n=null);let s=d.useContext(z),f=d.useMemo(()=>r?Array.isArray(r)?r.flatMap(o=>I(s[o])):I(s[r]):[],[s,r]),[w,j]=d.useState(s),[M,b]=d.useState(!1);s!==w&&(j(s),b(!1));let V=d.useMemo(()=>C(M?[]:f),[M,f]),x=d.useRef(m),[p,E]=d.useState(m),$=d.useRef(m),B=()=>{if(!O)return;g(!1);let o=l||n||x.current;y(o,$.current)||($.current=o,E(o))},[O,g]=d.useState(!1);return d.useEffect(B),{realtimeValidation:i||V||l||n||m,displayValidation:v==="native"?i||V||p:i||V||l||n||p,updateValidation(o){v==="aria"&&!y(p,o)?E(o):x.current=o},resetValidation(){let o=m;y(o,$.current)||($.current=o,E(o)),v==="native"&&g(!1),b(!0)},commitValidation(){v==="native"&&g(!0),b(!0)}}}function I(a){return a?Array.isArray(a)?a:[a]:[]}function _(a,e){if(typeof a=="function"){let t=a(e);if(t&&typeof t!="boolean")return I(t)}return[]}function C(a){return a.length?{isInvalid:!0,validationErrors:a,validationDetails:D}:null}function y(a,e){return a===e?!0:a&&e&&a.isInvalid===e.isInvalid&&a.validationErrors.length===e.validationErrors.length&&a.validationErrors.every((t,r)=>t===e.validationErrors[r])&&Object.entries(a.validationDetails).every(([t,r])=>e.validationDetails[t]===r)}export{H as $,Y as C,G as a,m as b,L as c,X as s};
